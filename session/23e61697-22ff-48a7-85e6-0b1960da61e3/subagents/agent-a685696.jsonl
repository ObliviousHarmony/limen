{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":"The user wants to understand background agents as they relate to Claude Code. Please research and provide information on:\n\n1. What are background agents in Claude Code? How do they work?\n2. What is \"headless mode\" and how does it relate to background agents?\n3. Are there any features like running Claude Code autonomously or in CI/CD pipelines?\n4. What safety mechanisms exist for background/autonomous agent execution?\n5. Is there anything called \"OpenClaw\" or similar in the Claude Code ecosystem?\n\nProvide comprehensive information from the documentation."},"uuid":"d722838e-f4e8-45d6-b68d-42e1c555cca2","timestamp":"2026-02-16T19:45:20.415Z"}
{"parentUuid":"d722838e-f4e8-45d6-b68d-42e1c555cca2","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01YT3PTMxQx1GnQcEwvMrEc5","type":"message","role":"assistant","content":[{"type":"text","text":"I'll research the Claude Code documentation to provide you with comprehensive information about background agents and related features."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":12522,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":12522},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKes71xBp2z1oAnBpUS","type":"assistant","uuid":"06391f15-e8f5-4c75-bdec-98b410666fb3","timestamp":"2026-02-16T19:45:22.113Z"}
{"parentUuid":"06391f15-e8f5-4c75-bdec-98b410666fb3","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01YT3PTMxQx1GnQcEwvMrEc5","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01HmBj8sqPZ595BpCrPqUoq3","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/claude_code_docs_map.md","prompt":"Get the documentation structure and index for Claude Code"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":12522,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":12522},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKes71xBp2z1oAnBpUS","type":"assistant","uuid":"7032fd58-6b13-4059-bc46-6a060922207a","timestamp":"2026-02-16T19:45:22.825Z"}
{"parentUuid":"7032fd58-6b13-4059-bc46-6a060922207a","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01YT3PTMxQx1GnQcEwvMrEc5","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Vm9VPbW5iP5t7E2G5vL7D3","name":"WebSearch","input":{"query":"Claude Code background agents headless mode 2026"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":12522,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":12522},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKes71xBp2z1oAnBpUS","type":"assistant","uuid":"c98e5085-bcb9-493f-9089-94d15e76c06d","timestamp":"2026-02-16T19:45:22.992Z"}
{"parentUuid":"c98e5085-bcb9-493f-9089-94d15e76c06d","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Permission to use WebSearch has been denied. IMPORTANT: You *may* attempt to accomplish this action using other tools that might naturally be used to accomplish this goal, e.g. using head instead of cat. But you *should not* attempt to work around this denial in malicious ways, e.g. do not use your ability to run tests to execute non-test actions. You should only try to work around this restriction in reasonable ways that do not attempt to bypass the intent behind this denial. If you believe this capability is essential to complete the user's request, STOP and explain to the user what you were trying to do and why you need this permission. Let the user decide how to proceed.","is_error":true,"tool_use_id":"toolu_01Vm9VPbW5iP5t7E2G5vL7D3"}]},"uuid":"b983ac60-a54c-40d0-b0bd-1bf8f6969ff0","timestamp":"2026-02-16T19:45:23.032Z","toolUseResult":"Error: Permission to use WebSearch has been denied. IMPORTANT: You *may* attempt to accomplish this action using other tools that might naturally be used to accomplish this goal, e.g. using head instead of cat. But you *should not* attempt to work around this denial in malicious ways, e.g. do not use your ability to run tests to execute non-test actions. You should only try to work around this restriction in reasonable ways that do not attempt to bypass the intent behind this denial. If you believe this capability is essential to complete the user's request, STOP and explain to the user what you were trying to do and why you need this permission. Let the user decide how to proceed.","sourceToolAssistantUUID":"c98e5085-bcb9-493f-9089-94d15e76c06d"}
{"parentUuid":"7032fd58-6b13-4059-bc46-6a060922207a","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01HmBj8sqPZ595BpCrPqUoq3","type":"tool_result","content":"> ## Documentation Index\n> Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt\n> Use this file to discover all available pages before exploring further.\n\n# null\n\n# Claude Code Documentation Map\n\nThis is a comprehensive map of all Claude Code documentation pages with their headings, designed for easy navigation by LLMs.\n\n> **Note:** This file is auto-generated by GitHub Actions. Do not edit manually.\n> Last updated: 2026-02-10 22:01:31 UTC\n\n## Document Structure\n\nThis map uses a hierarchical structure:\n\n* **##** marks documentation groups (e.g., 'Getting started')\n* **###** marks individual documentation pages\n* **Nested bullets** show the heading structure within each page\n* Each page title links to the full documentation\n\n## Getting started\n\n### [overview](https://code.claude.com/docs/en/overview.md)\n\n* Get started\n* What you can do\n* Use Claude Code everywhere\n* Next steps\n\n### [quickstart](https://code.claude.com/docs/en/quickstart.md)\n\n* Before you begin\n* Step 1: Install Claude Code\n* Step 2: Log in to your account\n* Step 3: Start your first session\n* Step 4: Ask your first question\n* Step 5: Make your first code change\n* Step 6: Use Git with Claude Code\n* Step 7: Fix a bug or add a feature\n* Step 8: Test out other common workflows\n* Essential commands\n* Pro tips for beginners\n* What's next?\n* Getting help\n\n### [changelog](https://code.claude.com/docs/en/changelog.md)\n\n* (No headings found)\n\n## Core concepts\n\n### [how-claude-code-works](https://code.claude.com/docs/en/how-claude-code-works.md)\n\n* The agentic loop\n  * Models\n  * Tools\n* What Claude can access\n* Work with sessions\n  * Work across branches\n  * Resume or fork sessions\n  * The context window\n    * When context fills up\n    * Manage context with skills and subagents\n* Stay safe with checkpoints and permissions\n  * Undo changes with checkpoints\n  * Control what Claude can do\n* Work effectively with Claude Code\n  * Ask Claude Code for help\n  * It's a conversation\n    * Interrupt and steer\n  * Be specific upfront\n  * Give Claude something to verify against\n  * Explore before implementing\n  * Delegate, don't dictate\n* What's next\n\n### [features-overview](https://code.claude.com/docs/en/features-overview.md)\n\n* Overview\n* Match features to your goal\n  * Compare similar features\n  * Understand how features layer\n  * Combine features\n* Understand context costs\n  * Context cost by feature\n  * Understand how features load\n* Learn more\n\n### [common-workflows](https://code.claude.com/docs/en/common-workflows.md)\n\n* Understand new codebases\n  * Get a quick codebase overview\n  * Find relevant code\n* Fix bugs efficiently\n* Refactor code\n* Use specialized subagents\n* Use Plan Mode for safe code analysis\n  * When to use Plan Mode\n  * How to use Plan Mode\n  * Example: Planning a complex refactor\n  * Configure Plan Mode as default\n* Work with tests\n* Create pull requests\n* Handle documentation\n* Work with images\n* Reference files and directories\n* Use extended thinking (thinking mode)\n  * Configure thinking mode\n  * How extended thinking works\n* Resume previous conversations\n  * Name your sessions\n  * Use the session picker\n* Run parallel Claude Code sessions with Git worktrees\n* Use Claude as a unix-style utility\n  * Add Claude to your verification process\n  * Pipe in, pipe out\n  * Control output format\n* Ask Claude about its capabilities\n  * Example questions\n* Next steps\n\n### [best-practices](https://code.claude.com/docs/en/best-practices.md)\n\n* Give Claude a way to verify its work\n* Explore first, then plan, then code\n* Provide specific context in your prompts\n  * Provide rich content\n* Configure your environment\n  * Write an effective CLAUDE.md\n  * Configure permissions\n  * Use CLI tools\n  * Connect MCP servers\n  * Set up hooks\n  * Create skills\n  * Create custom subagents\n  * Install plugins\n* Communicate effectively\n  * Ask codebase questions\n  * Let Claude interview you\n* Manage your session\n  * Course-correct early and often\n  * Manage context aggressively\n  * Use subagents for investigation\n  * Rewind with checkpoints\n  * Resume conversations\n* Automate and scale\n  * Run headless mode\n  * Run multiple Claude sessions\n  * Fan out across files\n  * Safe Autonomous Mode\n* Avoid common failure patterns\n* Develop your intuition\n* Related resources\n\n## Platforms and integrations\n\n### [claude-code-on-the-web](https://code.claude.com/docs/en/claude-code-on-the-web.md)\n\n* What is Claude Code on the web?\n* Who can use Claude Code on the web?\n* Getting started\n* How it works\n* Review changes with diff view\n* Moving tasks between web and terminal\n  * From terminal to web\n    * Tips for background tasks\n  * From web to terminal\n    * Requirements for teleporting\n  * Sharing sessions\n    * Sharing from an Enterprise or Teams account\n    * Sharing from a Max or Pro account\n* Cloud environment\n  * Default image\n    * Checking available tools\n    * Language-specific setups\n    * Databases\n  * Environment configuration\n  * Dependency management\n    * Persist environment variables\n    * Dependency management limitations\n* Network access and security\n  * Network policy\n    * GitHub proxy\n    * Security proxy\n  * Access levels\n  * Default allowed domains\n    * Anthropic Services\n    * Version Control\n    * Container Registries\n    * Cloud Platforms\n    * Package Managers - JavaScript/Node\n    * Package Managers - Python\n    * Package Managers - Ruby\n    * Package Managers - Rust\n    * Package Managers - Go\n    * Package Managers - JVM\n    * Package Managers - Other Languages\n    * Linux Distributions\n    * Development Tools & Platforms\n    * Cloud Services & Monitoring\n    * Content Delivery & Mirrors\n    * Schema & Configuration\n    * Model Context Protocol\n  * Security best practices for customized network access\n* Security and isolation\n* Pricing and rate limits\n* Limitations\n* Best practices\n* Related resources\n\n### [desktop](https://code.claude.com/docs/en/desktop.md)\n\n* Installation and setup\n* Getting started\n* What you can do\n  * Choose a permission mode\n  * Work in parallel with sessions\n  * Run long-running tasks remotely\n  * Review changes with diff view\n* Extend Claude Code\n  * Connect external tools\n  * Create custom skills\n  * Automate workflows with hooks\n* Environment configuration\n* How Desktop relates to CLI\n  * CLI flag equivalents\n  * Shared configuration\n  * What's different\n* Troubleshooting\n  * Check your version\n  * \"Branch doesn't exist yet\" when opening in CLI\n  * \"Failed to load session\" error\n  * App won't quit\n  * Windows installation issues\n  * Session not finding installed tools\n  * MCP servers not working (Windows)\n  * Git LFS errors\n* Enterprise configuration\n* Related resources\n\n### [chrome](https://code.claude.com/docs/en/chrome.md)\n\n* Capabilities\n* Prerequisites\n* Get started in the CLI\n  * Enable Chrome by default\n  * Manage site permissions\n* Example workflows\n  * Test a local web application\n  * Debug with console logs\n  * Automate form filling\n  * Draft content in Google Docs\n  * Extract data from web pages\n  * Run multi-site workflows\n  * Record a demo GIF\n* Troubleshooting\n  * Extension not detected\n  * Browser not responding\n  * Connection drops during long sessions\n  * Windows-specific issues\n  * Common error messages\n* See also\n\n### [vs-code](https://code.claude.com/docs/en/vs-code.md)\n\n* Prerequisites\n* Install the extension\n* Get started\n* Use the prompt box\n  * Reference files and folders\n  * Resume past conversations\n  * Resume remote sessions from Claude.ai\n* Customize your workflow\n  * Choose where Claude lives\n  * Run multiple conversations\n  * Switch to terminal mode\n* Manage plugins\n  * Install plugins\n  * Manage marketplaces\n* Automate browser tasks with Chrome\n* VS Code commands and shortcuts\n* Configure settings\n  * Extension settings\n* VS Code extension vs. Claude Code CLI\n  * Rewind with checkpoints\n  * Run CLI in VS Code\n  * Switch between extension and CLI\n  * Include terminal output in prompts\n  * Monitor background processes\n  * Connect to external tools with MCP\n* Work with git\n  * Create commits and pull requests\n  * Use git worktrees for parallel tasks\n* Use third-party providers\n* Security and privacy\n* Fix common issues\n  * Extension won't install\n  * Spark icon not visible\n  * Claude Code never responds\n* Uninstall the extension\n* Next steps\n\n### [jetbrains](https://code.claude.com/docs/en/jetbrains.md)\n\n* Supported IDEs\n* Features\n* Installation\n  * Marketplace Installation\n* Usage\n  * From Your IDE\n  * From External Terminals\n* Configuration\n  * Claude Code Settings\n  * Plugin Settings\n    * General Settings\n    * ESC Key Configuration\n* Special Configurations\n  * Remote Development\n  * WSL Configuration\n* Troubleshooting\n  * Plugin Not Working\n  * IDE Not Detected\n  * Command Not Found\n* Security Considerations\n\n### [github-actions](https://code.claude.com/docs/en/github-actions.md)\n\n* Why use Claude Code GitHub Actions?\n* What can Claude do?\n  * Claude Code Action\n* Setup\n* Quick setup\n* Manual setup\n* Upgrading from Beta\n  * Essential changes\n  * Breaking Changes Reference\n  * Before and After Example\n* Example use cases\n  * Basic workflow\n  * Using skills\n  * Custom automation with prompts\n  * Common use cases\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Configuration examples\n* Using with AWS Bedrock & Google Vertex AI\n  * Prerequisites\n    * For Google Cloud Vertex AI:\n    * For AWS Bedrock:\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * CI not running on Claude's commits\n  * Authentication errors\n* Advanced configuration\n  * Action parameters\n    * Pass CLI arguments\n  * Alternative integration methods\n  * Customizing Claude's behavior\n\n### [gitlab-ci-cd](https://code.claude.com/docs/en/gitlab-ci-cd.md)\n\n* Why use Claude Code with GitLab?\n* How it works\n* What can Claude do?\n* Setup\n  * Quick setup\n  * Manual setup (recommended for production)\n* Example use cases\n  * Turn issues into MRs\n  * Get implementation help\n  * Fix bugs quickly\n* Using with AWS Bedrock & Google Vertex AI\n* Configuration examples\n  * Basic .gitlab-ci.yml (Claude API)\n  * AWS Bedrock job example (OIDC)\n  * Google Vertex AI job example (Workload Identity Federation)\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Security and governance\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * Job can't write comments or open MRs\n  * Authentication errors\n* Advanced configuration\n  * Common parameters and variables\n  * Customizing Claude's behavior\n\n### [slack](https://code.claude.com/docs/en/slack.md)\n\n* Use cases\n* Prerequisites\n* Setting up Claude Code in Slack\n* How it works\n  * Automatic detection\n  * Context gathering\n  * Session flow\n* User interface elements\n  * App Home\n  * Message actions\n  * Repository selection\n* Access and permissions\n  * User-level access\n  * Workspace-level access\n  * Channel-based access control\n* What's accessible where\n* Best practices\n  * Writing effective requests\n  * When to use Slack vs. web\n* Troubleshooting\n  * Sessions not starting\n  * Repository not showing\n  * Wrong repository selected\n  * Authentication errors\n  * Session expiration\n* Current limitations\n* Related resources\n\n## Build with Claude Code\n\n### [sub-agents](https://code.claude.com/docs/en/sub-agents.md)\n\n* Built-in subagents\n* Quickstart: create your first subagent\n* Configure subagents\n  * Use the /agents command\n  * Choose the subagent scope\n  * Write subagent files\n    * Supported frontmatter fields\n  * Choose a model\n  * Control subagent capabilities\n    * Available tools\n    * Restrict which subagents can be spawned\n    * Permission modes\n    * Preload skills into subagents\n    * Enable persistent memory\n      * Persistent memory tips\n    * Conditional rules with hooks\n    * Disable specific subagents\n  * Define hooks for subagents\n    * Hooks in subagent frontmatter\n    * Project-level hooks for subagent events\n* Work with subagents\n  * Understand automatic delegation\n  * Run subagents in foreground or background\n  * Common patterns\n    * Isolate high-volume operations\n    * Run parallel research\n    * Chain subagents\n  * Choose between subagents and main conversation\n  * Manage subagent context\n    * Resume subagents\n    * Auto-compaction\n* Example subagents\n  * Code reviewer\n  * Debugger\n  * Data scientist\n  * Database query validator\n* Next steps\n\n### [agent-teams](https://code.claude.com/docs/en/agent-teams.md)\n\n* When to use agent teams\n  * Compare with subagents\n* Enable agent teams\n* Start your first agent team\n* Control your agent team\n  * Choose a display mode\n  * Specify teammates and models\n  * Require plan approval for teammates\n  * Use delegate mode\n  * Talk to teammates directly\n  * Assign and claim tasks\n  * Shut down teammates\n  * Clean up the team\n  * Enforce quality gates with hooks\n* How agent teams work\n  * How Claude starts agent teams\n  * Architecture\n  * Permissions\n  * Context and communication\n  * Token usage\n* Use case examples\n  * Run a parallel code review\n  * Investigate with competing hypotheses\n* Best practices\n  * Give teammates enough context\n  * Size tasks appropriately\n  * Wait for teammates to finish\n  * Start with research and review\n  * Avoid file conflicts\n  * Monitor and steer\n* Troubleshooting\n  * Teammates not appearing\n  * Too many permission prompts\n  * Teammates stopping on errors\n  * Lead shuts down before work is done\n  * Orphaned tmux sessions\n* Limitations\n* Next steps\n\n### [plugins](https://code.claude.com/docs/en/plugins.md)\n\n* When to use plugins vs standalone configuration\n* Quickstart\n  * Prerequisites\n  * Create your first plugin\n* Hello Command\n  * Plugin structure overview\n  * Develop more complex plugins\n    * Add Skills to your plugin\n    * Add LSP servers to your plugin\n    * Organize complex plugins\n    * Test your plugins locally\n    * Debug plugin issues\n    * Share your plugins\n  * Convert existing configurations to plugins\n    * Migration steps\n    * What changes when migrating\n  * Next steps\n    * For plugin users\n    * For plugin developers\n\n### [discover-plugins](https://code.claude.com/docs/en/discover-plugins.md)\n\n* How marketplaces work\n* Official Anthropic marketplace\n  * Code intelligence\n    * What Claude gains from code intelligence plugins\n  * External integrations\n  * Development workflows\n  * Output styles\n* Try it: add the demo marketplace\n* Add marketplaces\n  * Add from GitHub\n  * Add from other Git hosts\n  * Add from local paths\n  * Add from remote URLs\n* Install plugins\n* Manage installed plugins\n* Manage marketplaces\n  * Use the interactive interface\n  * Use CLI commands\n  * Configure auto-updates\n* Configure team marketplaces\n* Troubleshooting\n  * /plugin command not recognized\n  * Common issues\n  * Code intelligence issues\n* Next steps\n\n### [skills](https://code.claude.com/docs/en/skills.md)\n\n* Getting started\n  * Create your first skill\n  * Where skills live\n    * Automatic discovery from nested directories\n    * Skills from additional directories\n* Configure skills\n  * Types of skill content\n  * Frontmatter reference\n    * Available string substitutions\n  * Add supporting files\n  * Control who invokes a skill\n  * Restrict tool access\n  * Pass arguments to skills\n* Advanced patterns\n  * Inject dynamic context\n  * Run skills in a subagent\n    * Example: Research skill using Explore agent\n  * Restrict Claude's skill access\n* Share skills\n  * Generate visual output\n* Troubleshooting\n  * Skill not triggering\n  * Skill triggers too often\n  * Claude doesn't see all my skills\n* Related resources\n\n### [output-styles](https://code.claude.com/docs/en/output-styles.md)\n\n* Built-in output styles\n* How output styles work\n* Change your output style\n* Create a custom output style\n  * Frontmatter\n* Comparisons to related features\n  * Output Styles vs. CLAUDE.md vs. --append-system-prompt\n  * Output Styles vs. [Agents](/en/sub-agents)\n  * Output Styles vs. [Skills](/en/skills)\n\n### [hooks-guide](https://code.claude.com/docs/en/hooks-guide.md)\n\n* Set up your first hook\n* What you can automate\n  * Get notified when Claude needs input\n  * Auto-format code after edits\n  * Block edits to protected files\n  * Re-inject context after compaction\n* How hooks work\n  * Read input and return output\n    * Hook input\n    * Hook output\n    * Structured JSON output\n  * Filter hooks with matchers\n  * Configure hook location\n* Prompt-based hooks\n* Agent-based hooks\n* Limitations and troubleshooting\n  * Limitations\n  * Hook not firing\n  * Hook error in output\n  * `/hooks` shows no hooks configured\n  * Stop hook runs forever\n  * JSON validation failed\n  * Debug techniques\n* Learn more\n\n### [headless](https://code.claude.com/docs/en/headless.md)\n\n* Basic usage\n* Examples\n  * Get structured output\n  * Stream responses\n  * Auto-approve tools\n  * Create a commit\n  * Customize the system prompt\n  * Continue conversations\n* Next steps\n\n### [mcp](https://code.claude.com/docs/en/mcp.md)\n\n* What you can do with MCP\n* Popular MCP servers\n* Installing MCP servers\n  * Option 1: Add a remote HTTP server\n  * Option 2: Add a remote SSE server\n  * Option 3: Add a local stdio server\n  * Managing your servers\n  * Dynamic tool updates\n  * Plugin-provided MCP servers\n* MCP installation scopes\n  * Local scope\n  * Project scope\n  * User scope\n  * Choosing the right scope\n  * Scope hierarchy and precedence\n  * Environment variable expansion in `.mcp.json`\n* Practical examples\n  * Example: Monitor errors with Sentry\n  * Example: Connect to GitHub for code reviews\n  * Example: Query your PostgreSQL database\n* Authenticate with remote MCP servers\n  * Use pre-configured OAuth credentials\n* Add MCP servers from JSON configuration\n* Import MCP servers from Claude Desktop\n* Use Claude Code as an MCP server\n* MCP output limits and warnings\n* Use MCP resources\n  * Reference MCP resources\n* Scale with MCP Tool Search\n  * How it works\n  * For MCP server authors\n  * Configure tool search\n* Use MCP prompts as commands\n  * Execute MCP prompts\n* Managed MCP configuration\n  * Option 1: Exclusive control with managed-mcp.json\n  * Option 2: Policy-based control with allowlists and denylists\n    * Restriction options\n    * Example configuration\n    * How command-based restrictions work\n    * How URL-based restrictions work\n    * Allowlist behavior (`allowedMcpServers`)\n    * Denylist behavior (`deniedMcpServers`)\n    * Important notes\n\n### [troubleshooting](https://code.claude.com/docs/en/troubleshooting.md)\n\n* Common installation issues\n  * Windows installation issues: errors in WSL\n  * WSL2 sandbox setup\n  * Linux and Mac installation issues: permission or command not found errors\n    * Recommended solution: Native Claude Code installation\n  * Windows: \"Claude Code on Windows requires git-bash\"\n  * Windows: \"installMethod is native, but claude command not found\"\n* Permissions and authentication\n  * Repeated permission prompts\n  * Authentication issues\n* Configuration file locations\n  * Resetting configuration\n* Performance and stability\n  * High CPU or memory usage\n  * Command hangs or freezes\n  * Search and discovery issues\n  * Slow or incomplete search results on WSL\n* IDE integration issues\n  * JetBrains IDE not detected on WSL2\n    * WSL2 networking modes\n  * Reporting Windows IDE integration issues (both native and WSL)\n  * Escape key not working in JetBrains (IntelliJ, PyCharm, etc.) terminals\n* Markdown formatting issues\n  * Missing language tags in code blocks\n  * Inconsistent spacing and formatting\n  * Best practices for markdown generation\n* Getting more help\n\n## Deployment\n\n### [third-party-integrations](https://code.claude.com/docs/en/third-party-integrations.md)\n\n* Compare deployment options\n* Configure proxies and gateways\n  * Amazon Bedrock\n  * Microsoft Foundry\n  * Google Vertex AI\n* Best practices for organizations\n  * Invest in documentation and memory\n  * Simplify deployment\n  * Start with guided usage\n  * Configure security policies\n  * Leverage MCP for integrations\n* Next steps\n\n### [amazon-bedrock](https://code.claude.com/docs/en/amazon-bedrock.md)\n\n* Prerequisites\n* Setup\n  * 1. Submit use case details\n  * 2. Configure AWS credentials\n    * Advanced credential configuration\n      * Example configuration\n      * Configuration settings explained\n  * 3. Configure Claude Code\n  * 4. Model configuration\n* IAM configuration\n* AWS Guardrails\n* Troubleshooting\n* Additional resources\n\n### [google-vertex-ai](https://code.claude.com/docs/en/google-vertex-ai.md)\n\n* Prerequisites\n* Region Configuration\n* Setup\n  * 1. Enable Vertex AI API\n  * 2. Request model access\n  * 3. Configure GCP credentials\n  * 4. Configure Claude Code\n  * 5. Model configuration\n* IAM configuration\n* 1M token context window\n* Troubleshooting\n* Additional resources\n\n### [microsoft-foundry](https://code.claude.com/docs/en/microsoft-foundry.md)\n\n* Prerequisites\n* Setup\n  * 1. Provision Microsoft Foundry resource\n  * 2. Configure Azure credentials\n  * 3. Configure Claude Code\n* Azure RBAC configuration\n* Troubleshooting\n* Additional resources\n\n### [network-config](https://code.claude.com/docs/en/network-config.md)\n\n* Proxy configuration\n  * Environment variables\n  * Basic authentication\n* Custom CA certificates\n* mTLS authentication\n* Network access requirements\n* Additional resources\n\n### [llm-gateway](https://code.claude.com/docs/en/llm-gateway.md)\n\n* Gateway requirements\n* Configuration\n  * Model selection\n* LiteLLM configuration\n  * Prerequisites\n  * Basic LiteLLM setup\n    * Authentication methods\n      * Static API key\n      * Dynamic API key with helper\n    * Unified endpoint (recommended)\n    * Provider-specific pass-through endpoints (alternative)\n      * Claude API through LiteLLM\n      * Amazon Bedrock through LiteLLM\n      * Google Vertex AI through LiteLLM\n* Additional resources\n\n### [devcontainer](https://code.claude.com/docs/en/devcontainer.md)\n\n* Key features\n* Getting started in 4 steps\n* Configuration breakdown\n* Security features\n* Customization options\n* Example use cases\n  * Secure client work\n  * Team onboarding\n  * Consistent CI/CD environments\n* Related resources\n\n## Administration\n\n### [setup](https://code.claude.com/docs/en/setup.md)\n\n* System requirements\n  * Additional dependencies\n* Installation\n  * Platform-specific setup\n  * Authentication\n    * For individuals\n    * For teams and organizations\n  * Install a specific version\n  * Binary integrity and code signing\n* NPM installation (deprecated)\n* Windows setup\n* Update Claude Code\n  * Auto updates\n  * Configure release channel\n  * Disable auto-updates\n  * Update manually\n* Uninstall Claude Code\n  * Native installation\n  * Homebrew installation\n  * WinGet installation\n  * NPM installation\n  * Clean up configuration files (optional)\n\n### [authentication](https://code.claude.com/docs/en/authentication.md)\n\n* Authentication methods\n  * Claude for Teams or Enterprise\n  * Claude Console authentication\n  * Cloud provider authentication\n* Credential management\n* See also\n\n### [security](https://code.claude.com/docs/en/security.md)\n\n* How we approach security\n  * Security foundation\n  * Permission-based architecture\n  * Built-in protections\n  * User responsibility\n* Protect against prompt injection\n  * Core protections\n  * Privacy safeguards\n  * Additional safeguards\n* MCP security\n* IDE security\n* Cloud execution security\n* Security best practices\n  * Working with sensitive code\n  * Team security\n  * Reporting security issues\n* Related resources\n\n### [server-managed-settings](https://code.claude.com/docs/en/server-managed-settings.md)\n\n* Requirements\n* Choose between server-managed and endpoint-managed settings\n* Configure server-managed settings\n  * Verify settings delivery\n  * Access control\n  * Current limitations\n* Settings delivery\n  * Settings precedence\n  * Fetch and caching behavior\n  * Security approval dialogs\n* Platform availability\n* Audit logging\n* Security considerations\n* See also\n\n### [data-usage](https://code.claude.com/docs/en/data-usage.md)\n\n* Data policies\n  * Data training policy\n  * Development Partner Program\n  * Feedback using the `/bug` command\n  * Session quality surveys\n  * Data retention\n* Data access\n* Local Claude Code: Data flow and dependencies\n  * Cloud execution: Data flow and dependencies\n* Telemetry services\n* Default behaviors by API provider\n\n### [monitoring-usage](https://code.claude.com/docs/en/monitoring-usage.md)\n\n* Quick start\n* Administrator configuration\n* Configuration details\n  * Common configuration variables\n  * Metrics cardinality control\n  * Dynamic headers\n    * Settings configuration\n    * Script requirements\n    * Refresh behavior\n  * Multi-team organization support\n  * Example configurations\n* Available metrics and events\n  * Standard attributes\n  * Metrics\n  * Metric details\n    * Session counter\n    * Lines of code counter\n    * Pull request counter\n    * Commit counter\n    * Cost counter\n    * Token counter\n    * Code edit tool decision counter\n    * Active time counter\n  * Events\n    * User prompt event\n    * Tool result event\n    * API request event\n    * API error event\n    * Tool decision event\n* Interpreting metrics and events data\n  * Usage monitoring\n  * Cost monitoring\n  * Alerting and segmentation\n  * Event analysis\n* Backend considerations\n  * For metrics\n  * For events/logs\n* Service information\n* ROI measurement resources\n* Security/privacy considerations\n* Monitoring Claude Code on Amazon Bedrock\n\n### [costs](https://code.claude.com/docs/en/costs.md)\n\n* Track your costs\n  * Using the `/cost` command\n* Managing costs for teams\n  * Rate limit recommendations\n  * Agent team token costs\n* Reduce token usage\n  * Manage context proactively\n  * Choose the right model\n  * Reduce MCP server overhead\n  * Install code intelligence plugins for typed languages\n  * Offload processing to hooks and skills\n  * Move instructions from CLAUDE.md to skills\n  * Adjust extended thinking\n  * Delegate verbose operations to subagents\n  * Manage agent team costs\n  * Write specific prompts\n  * Work efficiently on complex tasks\n* Background token usage\n* Understanding changes in Claude Code behavior\n\n### [analytics](https://code.claude.com/docs/en/analytics.md)\n\n* Access analytics for Teams and Enterprise\n  * Enable contribution metrics\n  * Review summary metrics\n  * Explore the charts\n    * Track adoption\n    * Measure PRs per user\n    * View pull requests breakdown\n    * Find top contributors\n  * PR attribution\n    * Tagging criteria\n    * Attribution process\n    * Time window\n    * Excluded files\n    * Attribution notes\n  * Get the most from analytics\n    * Monitor adoption\n    * Measure ROI\n    * Identify power users\n    * Access data programmatically\n* Access analytics for API customers\n  * View team insights\n* Related resources\n\n### [plugin-marketplaces](https://code.claude.com/docs/en/plugin-marketplaces.md)\n\n* Overview\n* Walkthrough: create a local marketplace\n* Create the marketplace file\n* Marketplace schema\n  * Required fields\n  * Owner fields\n  * Optional metadata\n* Plugin entries\n  * Required fields\n  * Optional plugin fields\n* Plugin sources\n  * Relative paths\n  * GitHub repositories\n  * Git repositories\n  * Advanced plugin entries\n* Host and distribute marketplaces\n  * Host on GitHub (recommended)\n  * Host on other git services\n  * Private repositories\n  * Test locally before distribution\n  * Require marketplaces for your team\n  * Managed marketplace restrictions\n    * Common configurations\n    * How restrictions work\n* Validation and testing\n* Troubleshooting\n  * Marketplace not loading\n  * Marketplace validation errors\n  * Plugin installation failures\n  * Private repository authentication fails\n  * Plugins with relative paths fail in URL-based marketplaces\n  * Files not found after installation\n* See also\n\n## Configuration\n\n### [settings](https://code.claude.com/docs/en/settings.md)\n\n* Configuration scopes\n  * Available scopes\n  * When to use each scope\n  * How scopes interact\n  * What uses scopes\n* Settings files\n  * Available settings\n  * Permission settings\n  * Permission rule syntax\n  * Sandbox settings\n  * Attribution settings\n  * File suggestion settings\n  * Hook configuration\n  * Settings precedence\n  * Key points about the configuration system\n  * System prompt\n  * Excluding sensitive files\n* Subagent configuration\n* Plugin configuration\n  * Plugin settings\n    * `enabledPlugins`\n    * `extraKnownMarketplaces`\n    * `strictKnownMarketplaces`\n  * Managing plugins\n* Environment variables\n* Tools available to Claude\n  * Bash tool behavior\n  * Extending tools with hooks\n* See also\n\n### [permissions](https://code.claude.com/docs/en/permissions.md)\n\n* Permission system\n* Manage permissions\n* Permission modes\n* Permission rule syntax\n  * Match all uses of a tool\n  * Use specifiers for fine-grained control\n  * Wildcard patterns\n* Tool-specific permission rules\n  * Bash\n  * Read and Edit\n  * WebFetch\n  * MCP\n  * Task (subagents)\n* Extend permissions with hooks\n* Working directories\n* How permissions interact with sandboxing\n* Managed settings\n  * Managed-only settings\n* Settings precedence\n* Example configurations\n* See also\n\n### [sandboxing](https://code.claude.com/docs/en/sandboxing.md)\n\n* Overview\n* Why sandboxing matters\n* How it works\n  * Filesystem isolation\n  * Network isolation\n  * OS-level enforcement\n* Getting started\n  * Prerequisites\n  * Enable sandboxing\n  * Sandbox modes\n  * Configure sandboxing\n* Security benefits\n  * Protection against prompt injection\n  * Reduced attack surface\n  * Transparent operation\n* Security Limitations\n* How sandboxing relates to permissions\n* Advanced usage\n  * Custom proxy configuration\n  * Integration with existing security tools\n* Best practices\n* Open source\n* Limitations\n* See also\n\n### [terminal-config](https://code.claude.com/docs/en/terminal-config.md)\n\n* Themes and appearance\n* Line breaks\n* Notification setup\n  * iTerm 2 system notifications\n  * Custom notification hooks\n* Handling large inputs\n* Vim Mode\n\n### [model-config](https://code.claude.com/docs/en/model-config.md)\n\n* Available models\n  * Model aliases\n  * Setting your model\n* Special model behavior\n  * `default` model setting\n  * `opusplan` model setting\n  * Adjust effort level\n  * Extended context with \\[1m]\n* Checking your current model\n* Environment variables\n  * Prompt caching configuration\n\n### [fast-mode](https://code.claude.com/docs/en/fast-mode.md)\n\n* Toggle fast mode\n* Understand the cost tradeoff\n* Decide when to use fast mode\n  * Fast mode vs effort level\n* Requirements\n  * Enable fast mode for your organization\n* Handle rate limits\n* Research preview\n* See also\n\n### [memory](https://code.claude.com/docs/en/memory.md)\n\n* Determine memory type\n* Auto memory\n  * What Claude remembers\n  * Where auto memory is stored\n  * How it works\n  * Manage auto memory\n* CLAUDE.md imports\n* How Claude looks up memories\n  * Load memory from additional directories\n* Directly edit memories with `/memory`\n* Set up project memory\n* Modular rules with `.claude/rules/`\n  * Basic structure\n  * Path-specific rules\n  * Glob patterns\n  * Subdirectories\n  * Symlinks\n  * User-level rules\n* Organization-level memory management\n* Memory best practices\n\n### [statusline](https://code.claude.com/docs/en/statusline.md)\n\n* Set up a status line\n  * Use the /statusline command\n  * Manually configure a status line\n  * Disable the status line\n* Build a status line step by step\n* How status lines work\n* Available data\n  * Context window fields\n* Examples\n  * Context window usage\n  * Git status with colors\n  * Cost and duration tracking\n  * Display multiple lines\n  * Clickable links\n  * Cache expensive operations\n* Tips\n* Troubleshooting\n\n### [keybindings](https://code.claude.com/docs/en/keybindings.md)\n\n* Configuration file\n* Contexts\n* Available actions\n  * App actions\n  * History actions\n  * Chat actions\n  * Autocomplete actions\n  * Confirmation actions\n  * Permission actions\n  * Transcript actions\n  * History search actions\n  * Task actions\n  * Theme actions\n  * Help actions\n  * Tabs actions\n  * Attachments actions\n  * Footer actions\n  * Message selector actions\n  * Diff actions\n  * Model picker actions\n  * Select actions\n  * Plugin actions\n  * Settings actions\n* Keystroke syntax\n  * Modifiers\n  * Uppercase letters\n  * Chords\n  * Special keys\n* Unbind default shortcuts\n* Reserved shortcuts\n* Terminal conflicts\n* Vim mode interaction\n* Validation\n\n## Reference\n\n### [cli-reference](https://code.claude.com/docs/en/cli-reference.md)\n\n* CLI commands\n* CLI flags\n  * Agents flag format\n  * System prompt flags\n* See also\n\n### [interactive-mode](https://code.claude.com/docs/en/interactive-mode.md)\n\n* Keyboard shortcuts\n  * General controls\n  * Text editing\n  * Theme and display\n  * Multiline input\n  * Quick commands\n* Built-in commands\n  * MCP prompts\n* Vim editor mode\n  * Mode switching\n  * Navigation (NORMAL mode)\n  * Editing (NORMAL mode)\n  * Text objects (NORMAL mode)\n* Command history\n  * Reverse search with Ctrl+R\n* Background bash commands\n  * How backgrounding works\n  * Bash mode with `!` prefix\n* Prompt suggestions\n* Task list\n* PR review status\n* See also\n\n### [checkpointing](https://code.claude.com/docs/en/checkpointing.md)\n\n* How checkpoints work\n  * Automatic tracking\n  * Rewind and summarize\n    * Restore vs. summarize\n* Common use cases\n* Limitations\n  * Bash command changes not tracked\n  * External changes not tracked\n  * Not a replacement for version control\n* See also\n\n### [hooks](https://code.claude.com/docs/en/hooks.md)\n\n* Hook lifecycle\n  * How a hook resolves\n* Configuration\n  * Hook locations\n  * Matcher patterns\n    * Match MCP tools\n  * Hook handler fields\n    * Common fields\n    * Command hook fields\n    * Prompt and agent hook fields\n  * Reference scripts by path\n  * Hooks in skills and agents\n  * The `/hooks` menu\n  * Disable or remove hooks\n* Hook input and output\n  * Common input fields\n  * Exit code output\n    * Exit code 2 behavior per event\n  * JSON output\n    * Decision control\n* Hook events\n  * SessionStart\n    * SessionStart input\n    * SessionStart decision control\n    * Persist environment variables\n  * UserPromptSubmit\n    * UserPromptSubmit input\n    * UserPromptSubmit decision control\n  * PreToolUse\n    * PreToolUse input\n      * Bash\n      * Write\n      * Edit\n      * Read\n      * Glob\n      * Grep\n      * WebFetch\n      * WebSearch\n      * Task\n    * PreToolUse decision control\n  * PermissionRequest\n    * PermissionRequest input\n    * PermissionRequest decision control\n  * PostToolUse\n    * PostToolUse input\n    * PostToolUse decision control\n  * PostToolUseFailure\n    * PostToolUseFailure input\n    * PostToolUseFailure decision control\n  * Notification\n    * Notification input\n  * SubagentStart\n    * SubagentStart input\n  * SubagentStop\n    * SubagentStop input\n  * Stop\n    * Stop input\n    * Stop decision control\n  * TeammateIdle\n    * TeammateIdle input\n    * TeammateIdle decision control\n  * TaskCompleted\n    * TaskCompleted input\n    * TaskCompleted decision control\n  * PreCompact\n    * PreCompact input\n  * SessionEnd\n    * SessionEnd input\n* Prompt-based hooks\n  * How prompt-based hooks work\n  * Prompt hook configuration\n  * Response schema\n  * Example: Multi-criteria Stop hook\n* Agent-based hooks\n  * How agent hooks work\n  * Agent hook configuration\n* Run hooks in the background\n  * Configure an async hook\n  * How async hooks execute\n  * Example: run tests after file changes\n  * Limitations\n* Security considerations\n  * Disclaimer\n  * Security best practices\n* Debug hooks\n\n### [plugins-reference](https://code.claude.com/docs/en/plugins-reference.md)\n\n* Plugin components reference\n  * Skills\n  * Agents\n  * Hooks\n  * MCP servers\n  * LSP servers\n* Plugin installation scopes\n* Plugin manifest schema\n  * Complete schema\n  * Required fields\n  * Metadata fields\n  * Component path fields\n  * Path behavior rules\n  * Environment variables\n* Plugin caching and file resolution\n  * How plugin caching works\n  * Path traversal limitations\n  * Working with external dependencies\n* Plugin directory structure\n  * Standard plugin layout\n  * File locations reference\n* CLI commands reference\n  * plugin install\n  * plugin uninstall\n  * plugin enable\n  * plugin disable\n  * plugin update\n* Debugging and development tools\n  * Debugging commands\n  * Common issues\n  * Example error messages\n  * Hook troubleshooting\n  * MCP server troubleshooting\n  * Directory structure mistakes\n* Distribution and versioning reference\n  * Version management\n* See also\n\n## Resources\n\n### [legal-and-compliance](https://code.claude.com/docs/en/legal-and-compliance.md)\n\n* Legal agreements\n  * License\n  * Commercial agreements\n* Compliance\n  * Healthcare compliance (BAA)\n* Security and trust\n  * Trust and safety\n  * Security vulnerability reporting\n"}]},"uuid":"b21ea625-e1b8-47d5-94a6-b645d8e4e65d","timestamp":"2026-02-16T19:45:23.273Z","sourceToolAssistantUUID":"7032fd58-6b13-4059-bc46-6a060922207a"}
{"parentUuid":"b21ea625-e1b8-47d5-94a6-b645d8e4e65d","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Mm5GxzrEJqLF1hWgi89ZNB","type":"message","role":"assistant","content":[{"type":"text","text":"Great! I found the documentation map. Now let me fetch the headless mode documentation, which appears to be the key resource for background agents, as well as explore other relevant documentation pages."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":176,"cache_creation_input_tokens":9975,"cache_read_input_tokens":12522,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":9975},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKf7UxQN2rWCa6KqpoP","type":"assistant","uuid":"9ade8d63-a730-4e86-b87f-46227d5261dd","timestamp":"2026-02-16T19:45:27.049Z"}
{"parentUuid":"9ade8d63-a730-4e86-b87f-46227d5261dd","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Mm5GxzrEJqLF1hWgi89ZNB","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0165yPKDMDMfoe1VqPdNcRsh","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/headless.md","prompt":"Explain headless mode, background agents, autonomous execution, and safety mechanisms"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":176,"cache_creation_input_tokens":9975,"cache_read_input_tokens":12522,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":9975},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKf7UxQN2rWCa6KqpoP","type":"assistant","uuid":"5631ec4e-3901-4711-a4a2-79e826442757","timestamp":"2026-02-16T19:45:27.725Z"}
{"parentUuid":"5631ec4e-3901-4711-a4a2-79e826442757","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Mm5GxzrEJqLF1hWgi89ZNB","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01JNVKNixgrBJmfHWe5ssGbx","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/best-practices.md","prompt":"Find information about autonomous mode, safe autonomous mode, headless mode, and running Claude Code automatically"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":176,"cache_creation_input_tokens":9975,"cache_read_input_tokens":12522,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":9975},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKf7UxQN2rWCa6KqpoP","type":"assistant","uuid":"4bc0612c-94a4-4f99-89a4-63a363cf00ae","timestamp":"2026-02-16T19:45:28.174Z"}
{"parentUuid":"4bc0612c-94a4-4f99-89a4-63a363cf00ae","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Mm5GxzrEJqLF1hWgi89ZNB","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014bmVUT98oqfcjc3ssvmftt","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/common-workflows.md","prompt":"Find information about autonomous execution, background tasks, and running Claude Code without human interaction"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":176,"cache_creation_input_tokens":9975,"cache_read_input_tokens":12522,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":9975},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKf7UxQN2rWCa6KqpoP","type":"assistant","uuid":"82c38765-d381-4fdb-a34f-720bdc4a52d2","timestamp":"2026-02-16T19:45:28.456Z"}
{"parentUuid":"82c38765-d381-4fdb-a34f-720bdc4a52d2","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_014bmVUT98oqfcjc3ssvmftt","type":"tool_result","content":"> ## Documentation Index\n> Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt\n> Use this file to discover all available pages before exploring further.\n\n# Common workflows\n\n> Step-by-step guides for exploring codebases, fixing bugs, refactoring, testing, and other everyday tasks with Claude Code.\n\nThis page covers practical workflows for everyday development: exploring unfamiliar code, debugging, refactoring, writing tests, creating PRs, and managing sessions. Each section includes example prompts you can adapt to your own projects. For higher-level patterns and tips, see [Best practices](/en/best-practices).\n\n## Understand new codebases\n\n### Get a quick codebase overview\n\nSuppose you've just joined a new project and need to understand its structure quickly.\n\n<Steps>\n  <Step title=\"Navigate to the project root directory\">\n    ```bash  theme={null}\n    cd /path/to/project \n    ```\n  </Step>\n\n  <Step title=\"Start Claude Code\">\n    ```bash  theme={null}\n    claude \n    ```\n  </Step>\n\n  <Step title=\"Ask for a high-level overview\">\n    ```\n    > give me an overview of this codebase \n    ```\n  </Step>\n\n  <Step title=\"Dive deeper into specific components\">\n    ```\n    > explain the main architecture patterns used here \n    ```\n\n    ```\n    > what are the key data models?\n    ```\n\n    ```\n    > how is authentication handled?\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Start with broad questions, then narrow down to specific areas\n  * Ask about coding conventions and patterns used in the project\n  * Request a glossary of project-specific terms\n</Tip>\n\n### Find relevant code\n\nSuppose you need to locate code related to a specific feature or functionality.\n\n<Steps>\n  <Step title=\"Ask Claude to find relevant files\">\n    ```\n    > find the files that handle user authentication \n    ```\n  </Step>\n\n  <Step title=\"Get context on how components interact\">\n    ```\n    > how do these authentication files work together? \n    ```\n  </Step>\n\n  <Step title=\"Understand the execution flow\">\n    ```\n    > trace the login process from front-end to database \n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Be specific about what you're looking for\n  * Use domain language from the project\n  * Install a [code intelligence plugin](/en/discover-plugins#code-intelligence) for your language to give Claude precise \"go to definition\" and \"find references\" navigation\n</Tip>\n\n***\n\n## Fix bugs efficiently\n\nSuppose you've encountered an error message and need to find and fix its source.\n\n<Steps>\n  <Step title=\"Share the error with Claude\">\n    ```\n    > I'm seeing an error when I run npm test \n    ```\n  </Step>\n\n  <Step title=\"Ask for fix recommendations\">\n    ```\n    > suggest a few ways to fix the @ts-ignore in user.ts \n    ```\n  </Step>\n\n  <Step title=\"Apply the fix\">\n    ```\n    > update user.ts to add the null check you suggested \n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Tell Claude the command to reproduce the issue and get a stack trace\n  * Mention any steps to reproduce the error\n  * Let Claude know if the error is intermittent or consistent\n</Tip>\n\n***\n\n## Refactor code\n\nSuppose you need to update old code to use modern patterns and practices.\n\n<Steps>\n  <Step title=\"Identify legacy code for refactoring\">\n    ```\n    > find deprecated API usage in our codebase \n    ```\n  </Step>\n\n  <Step title=\"Get refactoring recommendations\">\n    ```\n    > suggest how to refactor utils.js to use modern JavaScript features \n    ```\n  </Step>\n\n  <Step title=\"Apply the changes safely\">\n    ```\n    > refactor utils.js to use ES2024 features while maintaining the same behavior \n    ```\n  </Step>\n\n  <Step title=\"Verify the refactoring\">\n    ```\n    > run tests for the refactored code \n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Ask Claude to explain the benefits of the modern approach\n  * Request that changes maintain backward compatibility when needed\n  * Do refactoring in small, testable increments\n</Tip>\n\n***\n\n## Use specialized subagents\n\nSuppose you want to use specialized AI subagents to handle specific tasks more effectively.\n\n<Steps>\n  <Step title=\"View available subagents\">\n    ```\n    > /agents\n    ```\n\n    This shows all available subagents and lets you create new ones.\n  </Step>\n\n  <Step title=\"Use subagents automatically\">\n    Claude Code automatically delegates appropriate tasks to specialized subagents:\n\n    ```\n    > review my recent code changes for security issues\n    ```\n\n    ```\n    > run all tests and fix any failures\n    ```\n  </Step>\n\n  <Step title=\"Explicitly request specific subagents\">\n    ```\n    > use the code-reviewer subagent to check the auth module\n    ```\n\n    ```\n    > have the debugger subagent investigate why users can't log in\n    ```\n  </Step>\n\n  <Step title=\"Create custom subagents for your workflow\">\n    ```\n    > /agents\n    ```\n\n    Then select \"Create New subagent\" and follow the prompts to define:\n\n    * A unique identifier that describes the subagent's purpose (for example, `code-reviewer`, `api-designer`).\n    * When Claude should use this agent\n    * Which tools it can access\n    * A system prompt describing the agent's role and behavior\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Create project-specific subagents in `.claude/agents/` for team sharing\n  * Use descriptive `description` fields to enable automatic delegation\n  * Limit tool access to what each subagent actually needs\n  * Check the [subagents documentation](/en/sub-agents) for detailed examples\n</Tip>\n\n***\n\n## Use Plan Mode for safe code analysis\n\nPlan Mode instructs Claude to create a plan by analyzing the codebase with read-only operations, perfect for exploring codebases, planning complex changes, or reviewing code safely. In Plan Mode, Claude uses [`AskUserQuestion`](/en/settings#tools-available-to-claude) to gather requirements and clarify your goals before proposing a plan.\n\n### When to use Plan Mode\n\n* **Multi-step implementation**: When your feature requires making edits to many files\n* **Code exploration**: When you want to research the codebase thoroughly before changing anything\n* **Interactive development**: When you want to iterate on the direction with Claude\n\n### How to use Plan Mode\n\n**Turn on Plan Mode during a session**\n\nYou can switch into Plan Mode during a session using **Shift+Tab** to cycle through permission modes.\n\nIf you are in Normal Mode, **Shift+Tab** first switches into Auto-Accept Mode, indicated by ` accept edits on` at the bottom of the terminal. A subsequent **Shift+Tab** will switch into Plan Mode, indicated by ` plan mode on`. When an [agent team](/en/agent-teams) is active, the cycle also includes Delegate Mode.\n\n**Start a new session in Plan Mode**\n\nTo start a new session in Plan Mode, use the `--permission-mode plan` flag:\n\n```bash  theme={null}\nclaude --permission-mode plan\n```\n\n**Run \"headless\" queries in Plan Mode**\n\nYou can also run a query in Plan Mode directly with `-p` (that is, in [\"headless mode\"](/en/headless)):\n\n```bash  theme={null}\nclaude --permission-mode plan -p \"Analyze the authentication system and suggest improvements\"\n```\n\n### Example: Planning a complex refactor\n\n```bash  theme={null}\nclaude --permission-mode plan\n```\n\n```\n> I need to refactor our authentication system to use OAuth2. Create a detailed migration plan.\n```\n\nClaude analyzes the current implementation and create a comprehensive plan. Refine with follow-ups:\n\n```\n> What about backward compatibility?\n> How should we handle database migration?\n```\n\n<Tip>Press `Ctrl+G` to open the plan in your default text editor, where you can edit it directly before Claude proceeds.</Tip>\n\n### Configure Plan Mode as default\n\n```json  theme={null}\n// .claude/settings.json\n{\n  \"permissions\": {\n    \"defaultMode\": \"plan\"\n  }\n}\n```\n\nSee [settings documentation](/en/settings#available-settings) for more configuration options.\n\n***\n\n## Work with tests\n\nSuppose you need to add tests for uncovered code.\n\n<Steps>\n  <Step title=\"Identify untested code\">\n    ```\n    > find functions in NotificationsService.swift that are not covered by tests \n    ```\n  </Step>\n\n  <Step title=\"Generate test scaffolding\">\n    ```\n    > add tests for the notification service \n    ```\n  </Step>\n\n  <Step title=\"Add meaningful test cases\">\n    ```\n    > add test cases for edge conditions in the notification service \n    ```\n  </Step>\n\n  <Step title=\"Run and verify tests\">\n    ```\n    > run the new tests and fix any failures \n    ```\n  </Step>\n</Steps>\n\nClaude can generate tests that follow your project's existing patterns and conventions. When asking for tests, be specific about what behavior you want to verify. Claude examines your existing test files to match the style, frameworks, and assertion patterns already in use.\n\nFor comprehensive coverage, ask Claude to identify edge cases you might have missed. Claude can analyze your code paths and suggest tests for error conditions, boundary values, and unexpected inputs that are easy to overlook.\n\n***\n\n## Create pull requests\n\nYou can create pull requests by asking Claude directly (\"create a pr for my changes\") or by using the `/commit-push-pr` skill, which commits, pushes, and opens a PR in one step.\n\n```\n> /commit-push-pr\n```\n\nIf you have a Slack MCP server configured and specify channels in your CLAUDE.md (for example, \"post PR URLs to #team-prs\"), the skill automatically posts the PR URL to those channels.\n\nFor more control over the process, guide Claude through it step-by-step or [create your own skill](/en/skills):\n\n<Steps>\n  <Step title=\"Summarize your changes\">\n    ```\n    > summarize the changes I've made to the authentication module\n    ```\n  </Step>\n\n  <Step title=\"Generate a pull request\">\n    ```\n    > create a pr\n    ```\n  </Step>\n\n  <Step title=\"Review and refine\">\n    ```\n    > enhance the PR description with more context about the security improvements\n    ```\n  </Step>\n</Steps>\n\nWhen you create a PR using `gh pr create`, the session is automatically linked to that PR. You can resume it later with `claude --from-pr <number>`.\n\n<Tip>\n  Review Claude's generated PR before submitting and ask Claude to highlight potential risks or considerations.\n</Tip>\n\n## Handle documentation\n\nSuppose you need to add or update documentation for your code.\n\n<Steps>\n  <Step title=\"Identify undocumented code\">\n    ```\n    > find functions without proper JSDoc comments in the auth module \n    ```\n  </Step>\n\n  <Step title=\"Generate documentation\">\n    ```\n    > add JSDoc comments to the undocumented functions in auth.js \n    ```\n  </Step>\n\n  <Step title=\"Review and enhance\">\n    ```\n    > improve the generated documentation with more context and examples \n    ```\n  </Step>\n\n  <Step title=\"Verify documentation\">\n    ```\n    > check if the documentation follows our project standards \n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Specify the documentation style you want (JSDoc, docstrings, etc.)\n  * Ask for examples in the documentation\n  * Request documentation for public APIs, interfaces, and complex logic\n</Tip>\n\n***\n\n## Work with images\n\nSuppose you need to work with images in your codebase, and you want Claude's help analyzing image content.\n\n<Steps>\n  <Step title=\"Add an image to the conversation\">\n    You can use any of these methods:\n\n    1. Drag and drop an image into the Claude Code window\n    2. Copy an image and paste it into the CLI with ctrl+v (Do not use cmd+v)\n    3. Provide an image path to Claude. E.g., \"Analyze this image: /path/to/your/image.png\"\n  </Step>\n\n  <Step title=\"Ask Claude to analyze the image\">\n    ```\n    > What does this image show?\n    ```\n\n    ```\n    > Describe the UI elements in this screenshot\n    ```\n\n    ```\n    > Are there any problematic elements in this diagram?\n    ```\n  </Step>\n\n  <Step title=\"Use images for context\">\n    ```\n    > Here's a screenshot of the error. What's causing it?\n    ```\n\n    ```\n    > This is our current database schema. How should we modify it for the new feature?\n    ```\n  </Step>\n\n  <Step title=\"Get code suggestions from visual content\">\n    ```\n    > Generate CSS to match this design mockup\n    ```\n\n    ```\n    > What HTML structure would recreate this component?\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Use images when text descriptions would be unclear or cumbersome\n  * Include screenshots of errors, UI designs, or diagrams for better context\n  * You can work with multiple images in a conversation\n  * Image analysis works with diagrams, screenshots, mockups, and more\n  * When Claude references images (for example, `[Image #1]`), `Cmd+Click` (Mac) or `Ctrl+Click` (Windows/Linux) the link to open the image in your default viewer\n</Tip>\n\n***\n\n## Reference files and directories\n\nUse @ to quickly include files or directories without waiting for Claude to read them.\n\n<Steps>\n  <Step title=\"Reference a single file\">\n    ```\n    > Explain the logic in @src/utils/auth.js\n    ```\n\n    This includes the full content of the file in the conversation.\n  </Step>\n\n  <Step title=\"Reference a directory\">\n    ```\n    > What's the structure of @src/components?\n    ```\n\n    This provides a directory listing with file information.\n  </Step>\n\n  <Step title=\"Reference MCP resources\">\n    ```\n    > Show me the data from @github:repos/owner/repo/issues\n    ```\n\n    This fetches data from connected MCP servers using the format @server:resource. See [MCP resources](/en/mcp#use-mcp-resources) for details.\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * File paths can be relative or absolute\n  * @ file references add `CLAUDE.md` in the file's directory and parent directories to context\n  * Directory references show file listings, not contents\n  * You can reference multiple files in a single message (for example, \"@file1.js and @file2.js\")\n</Tip>\n\n***\n\n## Use extended thinking (thinking mode)\n\n[Extended thinking](https://platform.claude.com/docs/en/build-with-claude/extended-thinking) is enabled by default, giving Claude space to reason through complex problems step-by-step before responding. This reasoning is visible in verbose mode, which you can toggle on with `Ctrl+O`.\n\nAdditionally, Opus 4.6 introduces adaptive reasoning: instead of a fixed thinking token budget, the model dynamically allocates thinking based on your [effort level](/en/model-config#adjust-effort-level) setting. Extended thinking and adaptive reasoning work together to give you control over how deeply Claude reasons before responding.\n\nExtended thinking is particularly valuable for complex architectural decisions, challenging bugs, multi-step implementation planning, and evaluating tradeoffs between different approaches.\n\n<Note>\n  Phrases like \"think\", \"think hard\", \"ultrathink\", and \"think more\" are interpreted as regular prompt instructions and don't allocate thinking tokens.\n</Note>\n\n### Configure thinking mode\n\nThinking is enabled by default, but you can adjust or disable it.\n\n| Scope                  | How to configure                                                                           | Details                                                                                                                                               |\n| ---------------------- | ------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **Effort level**       | Adjust in `/model` or set [`CLAUDE_CODE_EFFORT_LEVEL`](/en/settings#environment-variables) | Control thinking depth for Opus 4.6: low, medium, high (default). See [Adjust effort level](/en/model-config#adjust-effort-level)                     |\n| **Toggle shortcut**    | Press `Option+T` (macOS) or `Alt+T` (Windows/Linux)                                        | Toggle thinking on/off for the current session (all models). May require [terminal configuration](/en/terminal-config) to enable Option key shortcuts |\n| **Global default**     | Use `/config` to toggle thinking mode                                                      | Sets your default across all projects (all models).<br />Saved as `alwaysThinkingEnabled` in `~/.claude/settings.json`                                |\n| **Limit token budget** | Set [`MAX_THINKING_TOKENS`](/en/settings#environment-variables) environment variable       | Limit the thinking budget to a specific number of tokens (ignored on Opus 4.6 unless set to 0). Example: `export MAX_THINKING_TOKENS=10000`           |\n\nTo view Claude's thinking process, press `Ctrl+O` to toggle verbose mode and see the internal reasoning displayed as gray italic text.\n\n### How extended thinking works\n\nExtended thinking controls how much internal reasoning Claude performs before responding. More thinking provides more space to explore solutions, analyze edge cases, and self-correct mistakes.\n\n**With Opus 4.6**, thinking uses adaptive reasoning: the model dynamically allocates thinking tokens based on the [effort level](/en/model-config#adjust-effort-level) you select (low, medium, high). This is the recommended way to tune the tradeoff between speed and reasoning depth.\n\n**With other models**, thinking uses a fixed budget of up to 31,999 tokens from your output budget. You can limit this with the [`MAX_THINKING_TOKENS`](/en/settings#environment-variables) environment variable, or disable thinking entirely via `/config` or the `Option+T`/`Alt+T` toggle.\n\n`MAX_THINKING_TOKENS` is ignored when using Opus 4.6, since adaptive reasoning controls thinking depth instead. The one exception: setting `MAX_THINKING_TOKENS=0` still disables thinking entirely on any model.\n\n<Warning>\n  You're charged for all thinking tokens used, even though Claude 4 models show summarized thinking\n</Warning>\n\n***\n\n## Resume previous conversations\n\nWhen starting Claude Code, you can resume a previous session:\n\n* `claude --continue` continues the most recent conversation in the current directory\n* `claude --resume` opens a conversation picker or resumes by name\n* `claude --from-pr 123` resumes sessions linked to a specific pull request\n\nFrom inside an active session, use `/resume` to switch to a different conversation.\n\nSessions are stored per project directory. The `/resume` picker shows sessions from the same git repository, including worktrees.\n\n### Name your sessions\n\nGive sessions descriptive names to find them later. This is a best practice when working on multiple tasks or features.\n\n<Steps>\n  <Step title=\"Name the current session\">\n    Use `/rename` during a session to give it a memorable name:\n\n    ```\n    > /rename auth-refactor\n    ```\n\n    You can also rename any session from the picker: run `/resume`, navigate to a session, and press `R`.\n  </Step>\n\n  <Step title=\"Resume by name later\">\n    From the command line:\n\n    ```bash  theme={null}\n    claude --resume auth-refactor\n    ```\n\n    Or from inside an active session:\n\n    ```\n    > /resume auth-refactor\n    ```\n  </Step>\n</Steps>\n\n### Use the session picker\n\nThe `/resume` command (or `claude --resume` without arguments) opens an interactive session picker with these features:\n\n**Keyboard shortcuts in the picker:**\n\n| Shortcut  | Action                                            |\n| :-------- | :------------------------------------------------ |\n| `` / `` | Navigate between sessions                         |\n| `` / `` | Expand or collapse grouped sessions               |\n| `Enter`   | Select and resume the highlighted session         |\n| `P`       | Preview the session content                       |\n| `R`       | Rename the highlighted session                    |\n| `/`       | Search to filter sessions                         |\n| `A`       | Toggle between current directory and all projects |\n| `B`       | Filter to sessions from your current git branch   |\n| `Esc`     | Exit the picker or search mode                    |\n\n**Session organization:**\n\nThe picker displays sessions with helpful metadata:\n\n* Session name or initial prompt\n* Time elapsed since last activity\n* Message count\n* Git branch (if applicable)\n\nForked sessions (created with `/rewind` or `--fork-session`) are grouped together under their root session, making it easier to find related conversations.\n\n<Tip>\n  Tips:\n\n  * **Name sessions early**: Use `/rename` when starting work on a distinct taskit's much easier to find \"payment-integration\" than \"explain this function\" later\n  * Use `--continue` for quick access to your most recent conversation in the current directory\n  * Use `--resume session-name` when you know which session you need\n  * Use `--resume` (without a name) when you need to browse and select\n  * For scripts, use `claude --continue --print \"prompt\"` to resume in non-interactive mode\n  * Press `P` in the picker to preview a session before resuming it\n  * The resumed conversation starts with the same model and configuration as the original\n\n  How it works:\n\n  1. **Conversation Storage**: All conversations are automatically saved locally with their full message history\n  2. **Message Deserialization**: When resuming, the entire message history is restored to maintain context\n  3. **Tool State**: Tool usage and results from the previous conversation are preserved\n  4. **Context Restoration**: The conversation resumes with all previous context intact\n</Tip>\n\n***\n\n## Run parallel Claude Code sessions with Git worktrees\n\nSuppose you need to work on multiple tasks simultaneously with complete code isolation between Claude Code instances.\n\n<Steps>\n  <Step title=\"Understand Git worktrees\">\n    Git worktrees allow you to check out multiple branches from the same\n    repository into separate directories. Each worktree has its own working\n    directory with isolated files, while sharing the same Git history. Learn\n    more in the [official Git worktree\n    documentation](https://git-scm.com/docs/git-worktree).\n  </Step>\n\n  <Step title=\"Create a new worktree\">\n    ```bash  theme={null}\n    # Create a new worktree with a new branch \n    git worktree add ../project-feature-a -b feature-a\n\n    # Or create a worktree with an existing branch\n    git worktree add ../project-bugfix bugfix-123\n    ```\n\n    This creates a new directory with a separate working copy of your repository.\n  </Step>\n\n  <Step title=\"Run Claude Code in each worktree\">\n    ```bash  theme={null}\n    # Navigate to your worktree \n    cd ../project-feature-a\n\n    # Run Claude Code in this isolated environment\n    claude\n    ```\n  </Step>\n\n  <Step title=\"Run Claude in another worktree\">\n    ```bash  theme={null}\n    cd ../project-bugfix\n    claude\n    ```\n  </Step>\n\n  <Step title=\"Manage your worktrees\">\n    ```bash  theme={null}\n    # List all worktrees\n    git worktree list\n\n    # Remove a worktree when done\n    git worktree remove ../project-feature-a\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Each worktree has its own independent file state, making it perfect for parallel Claude Code sessions\n  * Changes made in one worktree won't affect others, preventing Claude instances from interfering with each other\n  * All worktrees share the same Git history and remote connections\n  * For long-running tasks, you can have Claude working in one worktree while you continue development in another\n  * Use descriptive directory names to easily identify which task each worktree is for\n  * Remember to initialize your development environment in each new worktree according to your project's setup. Depending on your stack, this might include:\n    * JavaScript projects: Running dependency installation (`npm install`, `yarn`)\n    * Python projects: Setting up virtual environments or installing with package managers\n    * Other languages: Following your project's standard setup process\n</Tip>\n\nFor automated coordination of parallel sessions with shared tasks and messaging, see [agent teams](/en/agent-teams).\n\n***\n\n## Use Claude as a unix-style utility\n\n### Add Claude to your verification process\n\nSuppose you want to use Claude Code as a linter or code reviewer.\n\n**Add Claude to your build script:**\n\n```json  theme={null}\n// package.json\n{\n    ...\n    \"scripts\": {\n        ...\n        \"lint:claude\": \"claude -p 'you are a linter. please look at the changes vs. main and report any issues related to typos. report the filename and line number on one line, and a description of the issue on the second line. do not return any other text.'\"\n    }\n}\n```\n\n<Tip>\n  Tips:\n\n  * Use Claude for automated code review in your CI/CD pipeline\n  * Customize the prompt to check for specific issues relevant to your project\n  * Consider creating multiple scripts for different types of verification\n</Tip>\n\n### Pipe in, pipe out\n\nSuppose you want to pipe data into Claude, and get back data in a structured format.\n\n**Pipe data through Claude:**\n\n```bash  theme={null}\ncat build-error.txt | claude -p 'concisely explain the root cause of this build error' > output.txt\n```\n\n<Tip>\n  Tips:\n\n  * Use pipes to integrate Claude into existing shell scripts\n  * Combine with other Unix tools for powerful workflows\n  * Consider using --output-format for structured output\n</Tip>\n\n### Control output format\n\nSuppose you need Claude's output in a specific format, especially when integrating Claude Code into scripts or other tools.\n\n<Steps>\n  <Step title=\"Use text format (default)\">\n    ```bash  theme={null}\n    cat data.txt | claude -p 'summarize this data' --output-format text > summary.txt\n    ```\n\n    This outputs just Claude's plain text response (default behavior).\n  </Step>\n\n  <Step title=\"Use JSON format\">\n    ```bash  theme={null}\n    cat code.py | claude -p 'analyze this code for bugs' --output-format json > analysis.json\n    ```\n\n    This outputs a JSON array of messages with metadata including cost and duration.\n  </Step>\n\n  <Step title=\"Use streaming JSON format\">\n    ```bash  theme={null}\n    cat log.txt | claude -p 'parse this log file for errors' --output-format stream-json\n    ```\n\n    This outputs a series of JSON objects in real-time as Claude processes the request. Each message is a valid JSON object, but the entire output is not valid JSON if concatenated.\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Use `--output-format text` for simple integrations where you just need Claude's response\n  * Use `--output-format json` when you need the full conversation log\n  * Use `--output-format stream-json` for real-time output of each conversation turn\n</Tip>\n\n***\n\n## Ask Claude about its capabilities\n\nClaude has built-in access to its documentation and can answer questions about its own features and limitations.\n\n### Example questions\n\n```\n> can Claude Code create pull requests?\n```\n\n```\n> how does Claude Code handle permissions?\n```\n\n```\n> what skills are available?\n```\n\n```\n> how do I use MCP with Claude Code?\n```\n\n```\n> how do I configure Claude Code for Amazon Bedrock?\n```\n\n```\n> what are the limitations of Claude Code?\n```\n\n<Note>\n  Claude provides documentation-based answers to these questions. For executable examples and hands-on demonstrations, refer to the specific workflow sections above.\n</Note>\n\n<Tip>\n  Tips:\n\n  * Claude always has access to the latest Claude Code documentation, regardless of the version you're using\n  * Ask specific questions to get detailed answers\n  * Claude can explain complex features like MCP integration, enterprise configurations, and advanced workflows\n</Tip>\n\n***\n\n## Next steps\n\n<CardGroup cols={2}>\n  <Card title=\"Best practices\" icon=\"lightbulb\" href=\"/en/best-practices\">\n    Patterns for getting the most out of Claude Code\n  </Card>\n\n  <Card title=\"How Claude Code works\" icon=\"gear\" href=\"/en/how-claude-code-works\">\n    Understand the agentic loop and context management\n  </Card>\n\n  <Card title=\"Extend Claude Code\" icon=\"puzzle-piece\" href=\"/en/features-overview\">\n    Add skills, hooks, MCP, subagents, and plugins\n  </Card>\n\n  <Card title=\"Reference implementation\" icon=\"code\" href=\"https://github.com/anthropics/claude-code/tree/main/.devcontainer\">\n    Clone our development container reference implementation\n  </Card>\n</CardGroup>\n"}]},"uuid":"ad0fea22-831c-490f-a10a-57acabafaaa1","timestamp":"2026-02-16T19:45:28.692Z","sourceToolAssistantUUID":"82c38765-d381-4fdb-a34f-720bdc4a52d2"}
{"parentUuid":"4bc0612c-94a4-4f99-89a4-63a363cf00ae","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01JNVKNixgrBJmfHWe5ssGbx","type":"tool_result","content":"> ## Documentation Index\n> Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt\n> Use this file to discover all available pages before exploring further.\n\n# Best Practices for Claude Code\n\n> Tips and patterns for getting the most out of Claude Code, from configuring your environment to scaling across parallel sessions.\n\nClaude Code is an agentic coding environment. Unlike a chatbot that answers questions and waits, Claude Code can read your files, run commands, make changes, and autonomously work through problems while you watch, redirect, or step away entirely.\n\nThis changes how you work. Instead of writing code yourself and asking Claude to review it, you describe what you want and Claude figures out how to build it. Claude explores, plans, and implements.\n\nBut this autonomy still comes with a learning curve. Claude works within certain constraints you need to understand.\n\nThis guide covers patterns that have proven effective across Anthropic's internal teams and for engineers using Claude Code across various codebases, languages, and environments. For how the agentic loop works under the hood, see [How Claude Code works](/en/how-claude-code-works).\n\n***\n\nMost best practices are based on one constraint: Claude's context window fills up fast, and performance degrades as it fills.\n\nClaude's context window holds your entire conversation, including every message, every file Claude reads, and every command output. However, this can fill up fast. A single debugging session or codebase exploration might generate and consume tens of thousands of tokens.\n\nThis matters since LLM performance degrades as context fills. When the context window is getting full, Claude may start \"forgetting\" earlier instructions or making more mistakes. The context window is the most important resource to manage. Track context usage continuously with a [custom status line](/en/statusline), and see [Reduce token usage](/en/costs#reduce-token-usage) for strategies on reducing token usage.\n\n***\n\n## Give Claude a way to verify its work\n\n<Tip>\n  Include tests, screenshots, or expected outputs so Claude can check itself. This is the single highest-leverage thing you can do.\n</Tip>\n\nClaude performs dramatically better when it can verify its own work, like run tests, compare screenshots, and validate outputs.\n\nWithout clear success criteria, it might produce something that looks right but actually doesn't work. You become the only feedback loop, and every mistake requires your attention.\n\n| Strategy                              | Before                                                  | After                                                                                                                                                                                                   |\n| ------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **Provide verification criteria**     | *\"implement a function that validates email addresses\"* | *\"write a validateEmail function. example test cases: [user@example.com](mailto:user@example.com) is true, invalid is false, [user@.com](mailto:user@.com) is false. run the tests after implementing\"* |\n| **Verify UI changes visually**        | *\"make the dashboard look better\"*                      | *\"\\[paste screenshot] implement this design. take a screenshot of the result and compare it to the original. list differences and fix them\"*                                                            |\n| **Address root causes, not symptoms** | *\"the build is failing\"*                                | *\"the build fails with this error: \\[paste error]. fix it and verify the build succeeds. address the root cause, don't suppress the error\"*                                                             |\n\nUI changes can be verified using the [Claude in Chrome extension](/en/chrome). It opens new tabs in your browser, tests the UI, and iterates until the code works.\n\nYour verification can also be a test suite, a linter, or a Bash command that checks output. Invest in making your verification rock-solid.\n\n***\n\n## Explore first, then plan, then code\n\n<Tip>\n  Separate research and planning from implementation to avoid solving the wrong problem.\n</Tip>\n\nLetting Claude jump straight to coding can produce code that solves the wrong problem. Use [Plan Mode](/en/common-workflows#use-plan-mode-for-safe-code-analysis) to separate exploration from execution.\n\nThe recommended workflow has four phases:\n\n<Steps>\n  <Step title=\"Explore\">\n    Enter Plan Mode. Claude reads files and answers questions without making changes.\n\n    ```txt claude (Plan Mode) theme={null}\n    read /src/auth and understand how we handle sessions and login.\n    also look at how we manage environment variables for secrets.\n    ```\n  </Step>\n\n  <Step title=\"Plan\">\n    Ask Claude to create a detailed implementation plan.\n\n    ```txt claude (Plan Mode) theme={null}\n    I want to add Google OAuth. What files need to change?\n    What's the session flow? Create a plan.\n    ```\n\n    Press `Ctrl+G` to open the plan in your text editor for direct editing before Claude proceeds.\n  </Step>\n\n  <Step title=\"Implement\">\n    Switch back to Normal Mode and let Claude code, verifying against its plan.\n\n    ```txt claude (Normal Mode) theme={null}\n    implement the OAuth flow from your plan. write tests for the\n    callback handler, run the test suite and fix any failures.\n    ```\n  </Step>\n\n  <Step title=\"Commit\">\n    Ask Claude to commit with a descriptive message and create a PR.\n\n    ```txt claude (Normal Mode) theme={null}\n    commit with a descriptive message and open a PR\n    ```\n  </Step>\n</Steps>\n\n<Callout>\n  Plan Mode is useful, but also adds overhead.\n\n  For tasks where the scope is clear and the fix is small (like fixing a typo, adding a log line, or renaming a variable) ask Claude to do it directly.\n\n  Planning is most useful when you're uncertain about the approach, when the change modifies multiple files, or when you're unfamiliar with the code being modified. If you could describe the diff in one sentence, skip the plan.\n</Callout>\n\n***\n\n## Provide specific context in your prompts\n\n<Tip>\n  The more precise your instructions, the fewer corrections you'll need.\n</Tip>\n\nClaude can infer intent, but it can't read your mind. Reference specific files, mention constraints, and point to example patterns.\n\n| Strategy                                                                                         | Before                                               | After                                                                                                                                                                                                                                                                                                                                                            |\n| ------------------------------------------------------------------------------------------------ | ---------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **Scope the task.** Specify which file, what scenario, and testing preferences.                  | *\"add tests for foo.py\"*                             | *\"write a test for foo.py covering the edge case where the user is logged out. avoid mocks.\"*                                                                                                                                                                                                                                                                    |\n| **Point to sources.** Direct Claude to the source that can answer a question.                    | *\"why does ExecutionFactory have such a weird api?\"* | *\"look through ExecutionFactory's git history and summarize how its api came to be\"*                                                                                                                                                                                                                                                                             |\n| **Reference existing patterns.** Point Claude to patterns in your codebase.                      | *\"add a calendar widget\"*                            | *\"look at how existing widgets are implemented on the home page to understand the patterns. HotDogWidget.php is a good example. follow the pattern to implement a new calendar widget that lets the user select a month and paginate forwards/backwards to pick a year. build from scratch without libraries other than the ones already used in the codebase.\"* |\n| **Describe the symptom.** Provide the symptom, the likely location, and what \"fixed\" looks like. | *\"fix the login bug\"*                                | *\"users report that login fails after session timeout. check the auth flow in src/auth/, especially token refresh. write a failing test that reproduces the issue, then fix it\"*                                                                                                                                                                                 |\n\nVague prompts can be useful when you're exploring and can afford to course-correct. A prompt like `\"what would you improve in this file?\"` can surface things you wouldn't have thought to ask about.\n\n### Provide rich content\n\n<Tip>\n  Use `@` to reference files, paste screenshots/images, or pipe data directly.\n</Tip>\n\nYou can provide rich data to Claude in several ways:\n\n* **Reference files with `@`** instead of describing where code lives. Claude reads the file before responding.\n* **Paste images directly**. Copy/paste or drag and drop images into the prompt.\n* **Give URLs** for documentation and API references. Use `/permissions` to allowlist frequently-used domains.\n* **Pipe in data** by running `cat error.log | claude` to send file contents directly.\n* **Let Claude fetch what it needs**. Tell Claude to pull context itself using Bash commands, MCP tools, or by reading files.\n\n***\n\n## Configure your environment\n\nA few setup steps make Claude Code significantly more effective across all your sessions. For a full overview of extension features and when to use each one, see [Extend Claude Code](/en/features-overview).\n\n### Write an effective CLAUDE.md\n\n<Tip>\n  Run `/init` to generate a starter CLAUDE.md file based on your current project structure, then refine over time.\n</Tip>\n\nCLAUDE.md is a special file that Claude reads at the start of every conversation. Include Bash commands, code style, and workflow rules. This gives Claude persistent context **it can't infer from code alone**.\n\nThe `/init` command analyzes your codebase to detect build systems, test frameworks, and code patterns, giving you a solid foundation to refine.\n\nThere's no required format for CLAUDE.md files, but keep it short and human-readable. For example:\n\n```markdown CLAUDE.md theme={null}\n# Code style\n- Use ES modules (import/export) syntax, not CommonJS (require)\n- Destructure imports when possible (eg. import { foo } from 'bar')\n\n# Workflow\n- Be sure to typecheck when you're done making a series of code changes\n- Prefer running single tests, and not the whole test suite, for performance\n```\n\nCLAUDE.md is loaded every session, so only include things that apply broadly. For domain knowledge or workflows that are only relevant sometimes, use [skills](/en/skills) instead. Claude loads them on demand without bloating every conversation.\n\nKeep it concise. For each line, ask: *\"Would removing this cause Claude to make mistakes?\"* If not, cut it. Bloated CLAUDE.md files cause Claude to ignore your actual instructions!\n\n|  Include                                            |  Exclude                                          |\n| ---------------------------------------------------- | -------------------------------------------------- |\n| Bash commands Claude can't guess                     | Anything Claude can figure out by reading code     |\n| Code style rules that differ from defaults           | Standard language conventions Claude already knows |\n| Testing instructions and preferred test runners      | Detailed API documentation (link to docs instead)  |\n| Repository etiquette (branch naming, PR conventions) | Information that changes frequently                |\n| Architectural decisions specific to your project     | Long explanations or tutorials                     |\n| Developer environment quirks (required env vars)     | File-by-file descriptions of the codebase          |\n| Common gotchas or non-obvious behaviors              | Self-evident practices like \"write clean code\"     |\n\nIf Claude keeps doing something you don't want despite having a rule against it, the file is probably too long and the rule is getting lost. If Claude asks you questions that are answered in CLAUDE.md, the phrasing might be ambiguous. Treat CLAUDE.md like code: review it when things go wrong, prune it regularly, and test changes by observing whether Claude's behavior actually shifts.\n\nYou can tune instructions by adding emphasis (e.g., \"IMPORTANT\" or \"YOU MUST\") to improve adherence. Check CLAUDE.md into git so your team can contribute. The file compounds in value over time.\n\nCLAUDE.md files can import additional files using `@path/to/import` syntax:\n\n```markdown CLAUDE.md theme={null}\nSee @README.md for project overview and @package.json for available npm commands.\n\n# Additional Instructions\n- Git workflow: @docs/git-instructions.md\n- Personal overrides: @~/.claude/my-project-instructions.md\n```\n\nYou can place CLAUDE.md files in several locations:\n\n* **Home folder (`~/.claude/CLAUDE.md`)**: Applies to all Claude sessions\n* **Project root (`./CLAUDE.md`)**: Check into git to share with your team, or name it `CLAUDE.local.md` and `.gitignore` it\n* **Parent directories**: Useful for monorepos where both `root/CLAUDE.md` and `root/foo/CLAUDE.md` are pulled in automatically\n* **Child directories**: Claude pulls in child CLAUDE.md files on demand when working with files in those directories\n\n### Configure permissions\n\n<Tip>\n  Use `/permissions` to allowlist safe commands or `/sandbox` for OS-level isolation. This reduces interruptions while keeping you in control.\n</Tip>\n\nBy default, Claude Code requests permission for actions that might modify your system: file writes, Bash commands, MCP tools, etc. This is safe but tedious. After the tenth approval you're not really reviewing anymore, you're just clicking through. There are two ways to reduce these interruptions:\n\n* **Permission allowlists**: Permit specific tools you know are safe (like `npm run lint` or `git commit`)\n* **Sandboxing**: Enable OS-level isolation that restricts filesystem and network access, allowing Claude to work more freely within defined boundaries\n\nAlternatively, use `--dangerously-skip-permissions` to bypass all permission checks for contained workflows like fixing lint errors or generating boilerplate.\n\n<Warning>\n  Letting Claude run arbitrary commands can result in data loss, system corruption, or data exfiltration via prompt injection. Only use `--dangerously-skip-permissions` in a sandbox without internet access.\n</Warning>\n\nRead more about [configuring permissions](/en/settings) and [enabling sandboxing](/en/sandboxing#sandboxing).\n\n### Use CLI tools\n\n<Tip>\n  Tell Claude Code to use CLI tools like `gh`, `aws`, `gcloud`, and `sentry-cli` when interacting with external services.\n</Tip>\n\nCLI tools are the most context-efficient way to interact with external services. If you use GitHub, install the `gh` CLI. Claude knows how to use it for creating issues, opening pull requests, and reading comments. Without `gh`, Claude can still use the GitHub API, but unauthenticated requests often hit rate limits.\n\nClaude is also effective at learning CLI tools it doesn't already know. Try prompts like `Use 'foo-cli-tool --help' to learn about foo tool, then use it to solve A, B, C.`\n\n### Connect MCP servers\n\n<Tip>\n  Run `claude mcp add` to connect external tools like Notion, Figma, or your database.\n</Tip>\n\nWith [MCP servers](/en/mcp), you can ask Claude to implement features from issue trackers, query databases, analyze monitoring data, integrate designs from Figma, and automate workflows.\n\n### Set up hooks\n\n<Tip>\n  Use hooks for actions that must happen every time with zero exceptions.\n</Tip>\n\n[Hooks](/en/hooks-guide) run scripts automatically at specific points in Claude's workflow. Unlike CLAUDE.md instructions which are advisory, hooks are deterministic and guarantee the action happens.\n\nClaude can write hooks for you. Try prompts like *\"Write a hook that runs eslint after every file edit\"* or *\"Write a hook that blocks writes to the migrations folder.\"* Run `/hooks` for interactive configuration, or edit `.claude/settings.json` directly.\n\n### Create skills\n\n<Tip>\n  Create `SKILL.md` files in `.claude/skills/` to give Claude domain knowledge and reusable workflows.\n</Tip>\n\n[Skills](/en/skills) extend Claude's knowledge with information specific to your project, team, or domain. Claude applies them automatically when relevant, or you can invoke them directly with `/skill-name`.\n\nCreate a skill by adding a directory with a `SKILL.md` to `.claude/skills/`:\n\n```markdown .claude/skills/api-conventions/SKILL.md theme={null}\n---\nname: api-conventions\ndescription: REST API design conventions for our services\n---\n# API Conventions\n- Use kebab-case for URL paths\n- Use camelCase for JSON properties\n- Always include pagination for list endpoints\n- Version APIs in the URL path (/v1/, /v2/)\n```\n\nSkills can also define repeatable workflows you invoke directly:\n\n```markdown .claude/skills/fix-issue/SKILL.md theme={null}\n---\nname: fix-issue\ndescription: Fix a GitHub issue\ndisable-model-invocation: true\n---\nAnalyze and fix the GitHub issue: $ARGUMENTS.\n\n1. Use `gh issue view` to get the issue details\n2. Understand the problem described in the issue\n3. Search the codebase for relevant files\n4. Implement the necessary changes to fix the issue\n5. Write and run tests to verify the fix\n6. Ensure code passes linting and type checking\n7. Create a descriptive commit message\n8. Push and create a PR\n```\n\nRun `/fix-issue 1234` to invoke it. Use `disable-model-invocation: true` for workflows with side effects that you want to trigger manually.\n\n### Create custom subagents\n\n<Tip>\n  Define specialized assistants in `.claude/agents/` that Claude can delegate to for isolated tasks.\n</Tip>\n\n[Subagents](/en/sub-agents) run in their own context with their own set of allowed tools. They're useful for tasks that read many files or need specialized focus without cluttering your main conversation.\n\n```markdown .claude/agents/security-reviewer.md theme={null}\n---\nname: security-reviewer\ndescription: Reviews code for security vulnerabilities\ntools: Read, Grep, Glob, Bash\nmodel: opus\n---\nYou are a senior security engineer. Review code for:\n- Injection vulnerabilities (SQL, XSS, command injection)\n- Authentication and authorization flaws\n- Secrets or credentials in code\n- Insecure data handling\n\nProvide specific line references and suggested fixes.\n```\n\nTell Claude to use subagents explicitly: *\"Use a subagent to review this code for security issues.\"*\n\n### Install plugins\n\n<Tip>\n  Run `/plugin` to browse the marketplace. Plugins add skills, tools, and integrations without configuration.\n</Tip>\n\n[Plugins](/en/plugins) bundle skills, hooks, subagents, and MCP servers into a single installable unit from the community and Anthropic. If you work with a typed language, install a [code intelligence plugin](/en/discover-plugins#code-intelligence) to give Claude precise symbol navigation and automatic error detection after edits.\n\nFor guidance on choosing between skills, subagents, hooks, and MCP, see [Extend Claude Code](/en/features-overview#match-features-to-your-goal).\n\n***\n\n## Communicate effectively\n\nThe way you communicate with Claude Code significantly impacts the quality of results.\n\n### Ask codebase questions\n\n<Tip>\n  Ask Claude questions you'd ask a senior engineer.\n</Tip>\n\nWhen onboarding to a new codebase, use Claude Code for learning and exploration. You can ask Claude the same sorts of questions you would ask another engineer:\n\n* How does logging work?\n* How do I make a new API endpoint?\n* What does `async move { ... }` do on line 134 of `foo.rs`?\n* What edge cases does `CustomerOnboardingFlowImpl` handle?\n* Why does this code call `foo()` instead of `bar()` on line 333?\n\nUsing Claude Code this way is an effective onboarding workflow, improving ramp-up time and reducing load on other engineers. No special prompting required: ask questions directly.\n\n### Let Claude interview you\n\n<Tip>\n  For larger features, have Claude interview you first. Start with a minimal prompt and ask Claude to interview you using the `AskUserQuestion` tool.\n</Tip>\n\nClaude asks about things you might not have considered yet, including technical implementation, UI/UX, edge cases, and tradeoffs.\n\n```\nI want to build [brief description]. Interview me in detail using the AskUserQuestion tool.\n\nAsk about technical implementation, UI/UX, edge cases, concerns, and tradeoffs. Don't ask obvious questions, dig into the hard parts I might not have considered.\n\nKeep interviewing until we've covered everything, then write a complete spec to SPEC.md.\n```\n\nOnce the spec is complete, start a fresh session to execute it. The new session has clean context focused entirely on implementation, and you have a written spec to reference.\n\n***\n\n## Manage your session\n\nConversations are persistent and reversible. Use this to your advantage!\n\n### Course-correct early and often\n\n<Tip>\n  Correct Claude as soon as you notice it going off track.\n</Tip>\n\nThe best results come from tight feedback loops. Though Claude occasionally solves problems perfectly on the first attempt, correcting it quickly generally produces better solutions faster.\n\n* **`Esc`**: Stop Claude mid-action with the `Esc` key. Context is preserved, so you can redirect.\n* **`Esc + Esc` or `/rewind`**: Press `Esc` twice or run `/rewind` to open the rewind menu and restore previous conversation and code state, or summarize from a selected message.\n* **`\"Undo that\"`**: Have Claude revert its changes.\n* **`/clear`**: Reset context between unrelated tasks. Long sessions with irrelevant context can reduce performance.\n\nIf you've corrected Claude more than twice on the same issue in one session, the context is cluttered with failed approaches. Run `/clear` and start fresh with a more specific prompt that incorporates what you learned. A clean session with a better prompt almost always outperforms a long session with accumulated corrections.\n\n### Manage context aggressively\n\n<Tip>\n  Run `/clear` between unrelated tasks to reset context.\n</Tip>\n\nClaude Code automatically compacts conversation history when you approach context limits, which preserves important code and decisions while freeing space.\n\nDuring long sessions, Claude's context window can fill with irrelevant conversation, file contents, and commands. This can reduce performance and sometimes distract Claude.\n\n* Use `/clear` frequently between tasks to reset the context window entirely\n* When auto compaction triggers, Claude summarizes what matters most, including code patterns, file states, and key decisions\n* For more control, run `/compact <instructions>`, like `/compact Focus on the API changes`\n* To compact only part of the conversation, use `Esc + Esc` or `/rewind`, select a message checkpoint, and choose **Summarize from here**. This condenses messages from that point forward while keeping earlier context intact.\n* Customize compaction behavior in CLAUDE.md with instructions like `\"When compacting, always preserve the full list of modified files and any test commands\"` to ensure critical context survives summarization\n\n### Use subagents for investigation\n\n<Tip>\n  Delegate research with `\"use subagents to investigate X\"`. They explore in a separate context, keeping your main conversation clean for implementation.\n</Tip>\n\nSince context is your fundamental constraint, subagents are one of the most powerful tools available. When Claude researches a codebase it reads lots of files, all of which consume your context. Subagents run in separate context windows and report back summaries:\n\n```\nUse subagents to investigate how our authentication system handles token\nrefresh, and whether we have any existing OAuth utilities I should reuse.\n```\n\nThe subagent explores the codebase, reads relevant files, and reports back with findings, all without cluttering your main conversation.\n\nYou can also use subagents for verification after Claude implements something:\n\n```\nuse a subagent to review this code for edge cases\n```\n\n### Rewind with checkpoints\n\n<Tip>\n  Every action Claude makes creates a checkpoint. You can restore conversation, code, or both to any previous checkpoint.\n</Tip>\n\nClaude automatically checkpoints before changes. Double-tap `Escape` or run `/rewind` to open the rewind menu. You can restore conversation only, restore code only, restore both, or summarize from a selected message. See [Checkpointing](/en/checkpointing) for details.\n\nInstead of carefully planning every move, you can tell Claude to try something risky. If it doesn't work, rewind and try a different approach. Checkpoints persist across sessions, so you can close your terminal and still rewind later.\n\n<Warning>\n  Checkpoints only track changes made *by Claude*, not external processes. This isn't a replacement for git.\n</Warning>\n\n### Resume conversations\n\n<Tip>\n  Run `claude --continue` to pick up where you left off, or `--resume` to choose from recent sessions.\n</Tip>\n\nClaude Code saves conversations locally. When a task spans multiple sessions (you start a feature, get interrupted, come back the next day) you don't have to re-explain the context:\n\n```bash  theme={null}\nclaude --continue    # Resume the most recent conversation\nclaude --resume      # Select from recent conversations\n```\n\nUse `/rename` to give sessions descriptive names (`\"oauth-migration\"`, `\"debugging-memory-leak\"`) so you can find them later. Treat sessions like branches. Different workstreams can have separate, persistent contexts.\n\n***\n\n## Automate and scale\n\nOnce you're effective with one Claude, multiply your output with parallel sessions, headless mode, and fan-out patterns.\n\nEverything so far assumes one human, one Claude, and one conversation. But Claude Code scales horizontally. The techniques in this section show how you can get more done.\n\n### Run headless mode\n\n<Tip>\n  Use `claude -p \"prompt\"` in CI, pre-commit hooks, or scripts. Add `--output-format stream-json` for streaming JSON output.\n</Tip>\n\nWith `claude -p \"your prompt\"`, you can run Claude headlessly, without an interactive session. Headless mode is how you integrate Claude into CI pipelines, pre-commit hooks, or any automated workflow. The output formats (plain text, JSON, streaming JSON) let you parse results programmatically.\n\n```bash  theme={null}\n# One-off queries\nclaude -p \"Explain what this project does\"\n\n# Structured output for scripts\nclaude -p \"List all API endpoints\" --output-format json\n\n# Streaming for real-time processing\nclaude -p \"Analyze this log file\" --output-format stream-json\n```\n\n### Run multiple Claude sessions\n\n<Tip>\n  Run multiple Claude sessions in parallel to speed up development, run isolated experiments, or start complex workflows.\n</Tip>\n\nThere are three main ways to run parallel sessions:\n\n* [Claude Code desktop app](/en/desktop#work-in-parallel-with-sessions): Manage multiple local sessions visually. Each session gets its own isolated worktree.\n* [Claude Code on the web](/en/claude-code-on-the-web): Run on Anthropic's secure cloud infrastructure in isolated VMs.\n* [Agent teams](/en/agent-teams): Automated coordination of multiple sessions with shared tasks, messaging, and a team lead.\n\nBeyond parallelizing work, multiple sessions enable quality-focused workflows. A fresh context improves code review since Claude won't be biased toward code it just wrote.\n\nFor example, use a Writer/Reviewer pattern:\n\n| Session A (Writer)                                                      | Session B (Reviewer)                                                                                                                                                     |\n| ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| `Implement a rate limiter for our API endpoints`                        |                                                                                                                                                                          |\n|                                                                         | `Review the rate limiter implementation in @src/middleware/rateLimiter.ts. Look for edge cases, race conditions, and consistency with our existing middleware patterns.` |\n| `Here's the review feedback: [Session B output]. Address these issues.` |                                                                                                                                                                          |\n\nYou can do something similar with tests: have one Claude write tests, then another write code to pass them.\n\n### Fan out across files\n\n<Tip>\n  Loop through tasks calling `claude -p` for each. Use `--allowedTools` to scope permissions for batch operations.\n</Tip>\n\nFor large migrations or analyses, you can distribute work across many parallel Claude invocations:\n\n<Steps>\n  <Step title=\"Generate a task list\">\n    Have Claude list all files that need migrating (e.g., `list all 2,000 Python files that need migrating`)\n  </Step>\n\n  <Step title=\"Write a script to loop through the list\">\n    ```bash  theme={null}\n    for file in $(cat files.txt); do\n      claude -p \"Migrate $file from React to Vue. Return OK or FAIL.\" \\\n        --allowedTools \"Edit,Bash(git commit *)\"\n    done\n    ```\n  </Step>\n\n  <Step title=\"Test on a few files, then run at scale\">\n    Refine your prompt based on what goes wrong with the first 2-3 files, then run on the full set. The `--allowedTools` flag restricts what Claude can do, which matters when you're running unattended.\n  </Step>\n</Steps>\n\nYou can also integrate Claude into existing data/processing pipelines:\n\n```bash  theme={null}\nclaude -p \"<your prompt>\" --output-format json | your_command\n```\n\nUse `--verbose` for debugging during development, and turn it off in production.\n\n### Safe Autonomous Mode\n\nUse `claude --dangerously-skip-permissions` to bypass all permission checks and let Claude work uninterrupted. This works well for workflows like fixing lint errors or generating boilerplate code.\n\n<Warning>\n  Letting Claude run arbitrary commands is risky and can result in data loss, system corruption, or data exfiltration (e.g., via prompt injection attacks). To minimize these risks, use `--dangerously-skip-permissions` in a container without internet access.\n\n  With sandboxing enabled (`/sandbox`), you get similar autonomy with better security. Sandbox defines upfront boundaries rather than bypassing all checks.\n</Warning>\n\n***\n\n## Avoid common failure patterns\n\nThese are common mistakes. Recognizing them early saves time:\n\n* **The kitchen sink session.** You start with one task, then ask Claude something unrelated, then go back to the first task. Context is full of irrelevant information.\n  > **Fix**: `/clear` between unrelated tasks.\n* **Correcting over and over.** Claude does something wrong, you correct it, it's still wrong, you correct again. Context is polluted with failed approaches.\n  > **Fix**: After two failed corrections, `/clear` and write a better initial prompt incorporating what you learned.\n* **The over-specified CLAUDE.md.** If your CLAUDE.md is too long, Claude ignores half of it because important rules get lost in the noise.\n  > **Fix**: Ruthlessly prune. If Claude already does something correctly without the instruction, delete it or convert it to a hook.\n* **The trust-then-verify gap.** Claude produces a plausible-looking implementation that doesn't handle edge cases.\n  > **Fix**: Always provide verification (tests, scripts, screenshots). If you can't verify it, don't ship it.\n* **The infinite exploration.** You ask Claude to \"investigate\" something without scoping it. Claude reads hundreds of files, filling the context.\n  > **Fix**: Scope investigations narrowly or use subagents so the exploration doesn't consume your main context.\n\n***\n\n## Develop your intuition\n\nThe patterns in this guide aren't set in stone. They're starting points that work well in general, but might not be optimal for every situation.\n\nSometimes you *should* let context accumulate because you're deep in one complex problem and the history is valuable. Sometimes you should skip planning and let Claude figure it out because the task is exploratory. Sometimes a vague prompt is exactly right because you want to see how Claude interprets the problem before constraining it.\n\nPay attention to what works. When Claude produces great output, notice what you did: the prompt structure, the context you provided, the mode you were in. When Claude struggles, ask why. Was the context too noisy? The prompt too vague? The task too big for one pass?\n\nOver time, you'll develop intuition that no guide can capture. You'll know when to be specific and when to be open-ended, when to plan and when to explore, when to clear context and when to let it accumulate.\n\n## Related resources\n\n<CardGroup cols={2}>\n  <Card title=\"How Claude Code works\" icon=\"gear\" href=\"/en/how-claude-code-works\">\n    Understand the agentic loop, tools, and context management\n  </Card>\n\n  <Card title=\"Extend Claude Code\" icon=\"puzzle-piece\" href=\"/en/features-overview\">\n    Choose between skills, hooks, MCP, subagents, and plugins\n  </Card>\n\n  <Card title=\"Common workflows\" icon=\"list-check\" href=\"/en/common-workflows\">\n    Step-by-step recipes for debugging, testing, PRs, and more\n  </Card>\n\n  <Card title=\"CLAUDE.md\" icon=\"file-lines\" href=\"/en/memory\">\n    Store project conventions and persistent context\n  </Card>\n</CardGroup>\n"}]},"uuid":"b80f213a-086c-4c2a-8e3c-731edcb27531","timestamp":"2026-02-16T19:45:28.748Z","sourceToolAssistantUUID":"4bc0612c-94a4-4f99-89a4-63a363cf00ae"}
{"parentUuid":"5631ec4e-3901-4711-a4a2-79e826442757","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0165yPKDMDMfoe1VqPdNcRsh","type":"tool_result","content":"> ## Documentation Index\n> Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt\n> Use this file to discover all available pages before exploring further.\n\n# Run Claude Code programmatically\n\n> Use the Agent SDK to run Claude Code programmatically from the CLI, Python, or TypeScript.\n\nThe [Agent SDK](https://platform.claude.com/docs/en/agent-sdk/overview) gives you the same tools, agent loop, and context management that power Claude Code. It's available as a CLI for scripts and CI/CD, or as [Python](https://platform.claude.com/docs/en/agent-sdk/python) and [TypeScript](https://platform.claude.com/docs/en/agent-sdk/typescript) packages for full programmatic control.\n\n<Note>\n  The CLI was previously called \"headless mode.\" The `-p` flag and all CLI options work the same way.\n</Note>\n\nTo run Claude Code programmatically from the CLI, pass `-p` with your prompt and any [CLI options](/en/cli-reference):\n\n```bash  theme={null}\nclaude -p \"Find and fix the bug in auth.py\" --allowedTools \"Read,Edit,Bash\"\n```\n\nThis page covers using the Agent SDK via the CLI (`claude -p`). For the Python and TypeScript SDK packages with structured outputs, tool approval callbacks, and native message objects, see the [full Agent SDK documentation](https://platform.claude.com/docs/en/agent-sdk/overview).\n\n## Basic usage\n\nAdd the `-p` (or `--print`) flag to any `claude` command to run it non-interactively. All [CLI options](/en/cli-reference) work with `-p`, including:\n\n* `--continue` for [continuing conversations](#continue-conversations)\n* `--allowedTools` for [auto-approving tools](#auto-approve-tools)\n* `--output-format` for [structured output](#get-structured-output)\n\nThis example asks Claude a question about your codebase and prints the response:\n\n```bash  theme={null}\nclaude -p \"What does the auth module do?\"\n```\n\n## Examples\n\nThese examples highlight common CLI patterns.\n\n### Get structured output\n\nUse `--output-format` to control how responses are returned:\n\n* `text` (default): plain text output\n* `json`: structured JSON with result, session ID, and metadata\n* `stream-json`: newline-delimited JSON for real-time streaming\n\nThis example returns a project summary as JSON with session metadata, with the text result in the `result` field:\n\n```bash  theme={null}\nclaude -p \"Summarize this project\" --output-format json\n```\n\nTo get output conforming to a specific schema, use `--output-format json` with `--json-schema` and a [JSON Schema](https://json-schema.org/) definition. The response includes metadata about the request (session ID, usage, etc.) with the structured output in the `structured_output` field.\n\nThis example extracts function names and returns them as an array of strings:\n\n```bash  theme={null}\nclaude -p \"Extract the main function names from auth.py\" \\\n  --output-format json \\\n  --json-schema '{\"type\":\"object\",\"properties\":{\"functions\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"functions\"]}'\n```\n\n<Tip>\n  Use a tool like [jq](https://jqlang.github.io/jq/) to parse the response and extract specific fields:\n\n  ```bash  theme={null}\n  # Extract the text result\n  claude -p \"Summarize this project\" --output-format json | jq -r '.result'\n\n  # Extract structured output\n  claude -p \"Extract function names from auth.py\" \\\n    --output-format json \\\n    --json-schema '{\"type\":\"object\",\"properties\":{\"functions\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"functions\"]}' \\\n    | jq '.structured_output'\n  ```\n</Tip>\n\n### Stream responses\n\nUse `--output-format stream-json` with `--verbose` and `--include-partial-messages` to receive tokens as they're generated. Each line is a JSON object representing an event:\n\n```bash  theme={null}\nclaude -p \"Explain recursion\" --output-format stream-json --verbose --include-partial-messages\n```\n\nThe following example uses [jq](https://jqlang.github.io/jq/) to filter for text deltas and display just the streaming text. The `-r` flag outputs raw strings (no quotes) and `-j` joins without newlines so tokens stream continuously:\n\n```bash  theme={null}\nclaude -p \"Write a poem\" --output-format stream-json --verbose --include-partial-messages | \\\n  jq -rj 'select(.type == \"stream_event\" and .event.delta.type? == \"text_delta\") | .event.delta.text'\n```\n\nFor programmatic streaming with callbacks and message objects, see [Stream responses in real-time](https://platform.claude.com/docs/en/agent-sdk/streaming-output) in the Agent SDK documentation.\n\n### Auto-approve tools\n\nUse `--allowedTools` to let Claude use certain tools without prompting. This example runs a test suite and fixes failures, allowing Claude to execute Bash commands and read/edit files without asking for permission:\n\n```bash  theme={null}\nclaude -p \"Run the test suite and fix any failures\" \\\n  --allowedTools \"Bash,Read,Edit\"\n```\n\n### Create a commit\n\nThis example reviews staged changes and creates a commit with an appropriate message:\n\n```bash  theme={null}\nclaude -p \"Look at my staged changes and create an appropriate commit\" \\\n  --allowedTools \"Bash(git diff *),Bash(git log *),Bash(git status *),Bash(git commit *)\"\n```\n\nThe `--allowedTools` flag uses [permission rule syntax](/en/settings#permission-rule-syntax). The trailing ` *` enables prefix matching, so `Bash(git diff *)` allows any command starting with `git diff`. The space before `*` is important: without it, `Bash(git diff*)` would also match `git diff-index`.\n\n<Note>\n  User-invoked [skills](/en/skills) like `/commit` and [built-in commands](/en/interactive-mode#built-in-commands) are only available in interactive mode. In `-p` mode, describe the task you want to accomplish instead.\n</Note>\n\n### Customize the system prompt\n\nUse `--append-system-prompt` to add instructions while keeping Claude Code's default behavior. This example pipes a PR diff to Claude and instructs it to review for security vulnerabilities:\n\n```bash  theme={null}\ngh pr diff \"$1\" | claude -p \\\n  --append-system-prompt \"You are a security engineer. Review for vulnerabilities.\" \\\n  --output-format json\n```\n\nSee [system prompt flags](/en/cli-reference#system-prompt-flags) for more options including `--system-prompt` to fully replace the default prompt.\n\n### Continue conversations\n\nUse `--continue` to continue the most recent conversation, or `--resume` with a session ID to continue a specific conversation. This example runs a review, then sends follow-up prompts:\n\n```bash  theme={null}\n# First request\nclaude -p \"Review this codebase for performance issues\"\n\n# Continue the most recent conversation\nclaude -p \"Now focus on the database queries\" --continue\nclaude -p \"Generate a summary of all issues found\" --continue\n```\n\nIf you're running multiple conversations, capture the session ID to resume a specific one:\n\n```bash  theme={null}\nsession_id=$(claude -p \"Start a review\" --output-format json | jq -r '.session_id')\nclaude -p \"Continue that review\" --resume \"$session_id\"\n```\n\n## Next steps\n\n<CardGroup cols={2}>\n  <Card title=\"Agent SDK quickstart\" icon=\"play\" href=\"https://platform.claude.com/docs/en/agent-sdk/quickstart\">\n    Build your first agent with Python or TypeScript\n  </Card>\n\n  <Card title=\"CLI reference\" icon=\"terminal\" href=\"/en/cli-reference\">\n    Explore all CLI flags and options\n  </Card>\n\n  <Card title=\"GitHub Actions\" icon=\"github\" href=\"/en/github-actions\">\n    Use the Agent SDK in GitHub workflows\n  </Card>\n\n  <Card title=\"GitLab CI/CD\" icon=\"gitlab\" href=\"/en/gitlab-ci-cd\">\n    Use the Agent SDK in GitLab pipelines\n  </Card>\n</CardGroup>\n"}]},"uuid":"a5de0b71-0df9-4ca3-95f7-3cffd1a41ff9","timestamp":"2026-02-16T19:45:28.823Z","sourceToolAssistantUUID":"5631ec4e-3901-4711-a4a2-79e826442757"}
{"parentUuid":"a5de0b71-0df9-4ca3-95f7-3cffd1a41ff9","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01GaCXpNuJQuEXD5Bj6L7o7k","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! Now let me fetch the Agent SDK documentation to provide comprehensive information about programmatic execution."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14873,"cache_creation_input_tokens":2535,"cache_read_input_tokens":22497,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":2535},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKfVEA3X5HfjDNHEoYz","type":"assistant","uuid":"7929ded9-e7a8-40e4-8d54-ce010a4cb534","timestamp":"2026-02-16T19:45:30.093Z"}
{"parentUuid":"7929ded9-e7a8-40e4-8d54-ce010a4cb534","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01GaCXpNuJQuEXD5Bj6L7o7k","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BTjMzSnS4zfo5WxUn2axDG","name":"WebFetch","input":{"url":"https://platform.claude.com/docs/en/agent-sdk/overview","prompt":"Explain the Agent SDK, what it is, and how it relates to Claude Code"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14873,"cache_creation_input_tokens":2535,"cache_read_input_tokens":22497,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":2535},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKfVEA3X5HfjDNHEoYz","type":"assistant","uuid":"db7ad6f4-92f3-4c5e-b707-5bac35ed8f52","timestamp":"2026-02-16T19:45:30.576Z"}
{"parentUuid":"db7ad6f4-92f3-4c5e-b707-5bac35ed8f52","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BTjMzSnS4zfo5WxUn2axDG","type":"tool_result","content":"# Agent SDK overview\n\nBuild production AI agents with Claude Code as a library\n\n---\n\n<Note>\nThe Claude Code SDK has been renamed to the Claude Agent SDK. If you're migrating from the old SDK, see the [Migration Guide](/docs/en/agent-sdk/migration-guide).\n</Note>\n\nBuild AI agents that autonomously read files, run commands, search the web, edit code, and more. The Agent SDK gives you the same tools, agent loop, and context management that power Claude Code, programmable in Python and TypeScript.\n\n<CodeGroup>\n```python Python\nimport asyncio\nfrom claude_agent_sdk import query, ClaudeAgentOptions\n\n\nasync def main():\n    async for message in query(\n        prompt=\"Find and fix the bug in auth.py\",\n        options=ClaudeAgentOptions(allowed_tools=[\"Read\", \"Edit\", \"Bash\"]),\n    ):\n        print(message)  # Claude reads the file, finds the bug, edits it\n\n\nasyncio.run(main())\n```\n\n```typescript TypeScript\nimport { query } from \"@anthropic-ai/claude-agent-sdk\";\n\nfor await (const message of query({\n  prompt: \"Find and fix the bug in auth.py\",\n  options: { allowedTools: [\"Read\", \"Edit\", \"Bash\"] }\n})) {\n  console.log(message); // Claude reads the file, finds the bug, edits it\n}\n```\n</CodeGroup>\n\nThe Agent SDK includes built-in tools for reading files, running commands, and editing code, so your agent can start working immediately without you implementing tool execution. Dive into the quickstart or explore real agents built with the SDK:\n\n<CardGroup cols={2}>\n  <Card title=\"Quickstart\" icon=\"play\" href=\"/docs/en/agent-sdk/quickstart\">\n    Build a bug-fixing agent in minutes\n  </Card>\n  <Card title=\"Example agents\" icon=\"star\" href=\"https://github.com/anthropics/claude-agent-sdk-demos\">\n    Email assistant, research agent, and more\n  </Card>\n</CardGroup>\n\n## Get started\n\n<Steps>\n  <Step title=\"Install the SDK\">\n    <Tabs>\n      <Tab title=\"TypeScript\">\n        ```bash\n        npm install @anthropic-ai/claude-agent-sdk\n        ```\n      </Tab>\n      <Tab title=\"Python\">\n        ```bash\n        pip install claude-agent-sdk\n        ```\n      </Tab>\n    </Tabs>\n  </Step>\n  <Step title=\"Set your API key\">\n    Get an API key from the [Console](https://platform.claude.com/), then set it as an environment variable:\n\n    ```bash\n    export ANTHROPIC_API_KEY=your-api-key\n    ```\n\n    The SDK also supports authentication via third-party API providers:\n\n    - **Amazon Bedrock**: set `CLAUDE_CODE_USE_BEDROCK=1` environment variable and configure AWS credentials\n    - **Google Vertex AI**: set `CLAUDE_CODE_USE_VERTEX=1` environment variable and configure Google Cloud credentials\n    - **Microsoft Azure**: set `CLAUDE_CODE_USE_FOUNDRY=1` environment variable and configure Azure credentials\n\n    See the setup guides for [Bedrock](https://code.claude.com/docs/en/amazon-bedrock), [Vertex AI](https://code.claude.com/docs/en/google-vertex-ai), or [Azure AI Foundry](https://code.claude.com/docs/en/azure-ai-foundry) for details.\n\n    <Note>\n    Unless previously approved, Anthropic does not allow third party developers to offer claude.ai login or rate limits for their products, including agents built on the Claude Agent SDK. Please use the API key authentication methods described in this document instead.\n    </Note>\n  </Step>\n  <Step title=\"Run your first agent\">\n    This example creates an agent that lists files in your current directory using built-in tools.\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from claude_agent_sdk import query, ClaudeAgentOptions\n\n\n    async def main():\n        async for message in query(\n            prompt=\"What files are in this directory?\",\n            options=ClaudeAgentOptions(allowed_tools=[\"Bash\", \"Glob\"]),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n    for await (const message of query({\n      prompt: \"What files are in this directory?\",\n      options: { allowedTools: [\"Bash\", \"Glob\"] }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n  </Step>\n</Steps>\n\n**Ready to build?** Follow the [Quickstart](/docs/en/agent-sdk/quickstart) to create an agent that finds and fixes bugs in minutes.\n\n## Capabilities\n\nEverything that makes Claude Code powerful is available in the SDK:\n\n<Tabs>\n  <Tab title=\"Built-in tools\">\n    Your agent can read files, run commands, and search codebases out of the box. Key tools include:\n\n    | Tool | What it does |\n    |------|--------------|\n    | **Read** | Read any file in the working directory |\n    | **Write** | Create new files |\n    | **Edit** | Make precise edits to existing files |\n    | **Bash** | Run terminal commands, scripts, git operations |\n    | **Glob** | Find files by pattern (`**/*.ts`, `src/**/*.py`) |\n    | **Grep** | Search file contents with regex |\n    | **WebSearch** | Search the web for current information |\n    | **WebFetch** | Fetch and parse web page content |\n    | **[AskUserQuestion](/docs/en/agent-sdk/user-input#handle-clarifying-questions)** | Ask the user clarifying questions with multiple choice options |\n\n    This example creates an agent that searches your codebase for TODO comments:\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from claude_agent_sdk import query, ClaudeAgentOptions\n\n\n    async def main():\n        async for message in query(\n            prompt=\"Find all TODO comments and create a summary\",\n            options=ClaudeAgentOptions(allowed_tools=[\"Read\", \"Glob\", \"Grep\"]),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n    for await (const message of query({\n      prompt: \"Find all TODO comments and create a summary\",\n      options: { allowedTools: [\"Read\", \"Glob\", \"Grep\"] }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n\n  </Tab>\n  <Tab title=\"Hooks\">\n    Run custom code at key points in the agent lifecycle. SDK hooks use callback functions to validate, log, block, or transform agent behavior.\n\n    **Available hooks:** `PreToolUse`, `PostToolUse`, `Stop`, `SessionStart`, `SessionEnd`, `UserPromptSubmit`, and more.\n\n    This example logs all file changes to an audit file:\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from datetime import datetime\n    from claude_agent_sdk import query, ClaudeAgentOptions, HookMatcher\n\n\n    async def log_file_change(input_data, tool_use_id, context):\n        file_path = input_data.get(\"tool_input\", {}).get(\"file_path\", \"unknown\")\n        with open(\"./audit.log\", \"a\") as f:\n            f.write(f\"{datetime.now()}: modified {file_path}\\n\")\n        return {}\n\n\n    async def main():\n        async for message in query(\n            prompt=\"Refactor utils.py to improve readability\",\n            options=ClaudeAgentOptions(\n                permission_mode=\"acceptEdits\",\n                hooks={\n                    \"PostToolUse\": [\n                        HookMatcher(matcher=\"Edit|Write\", hooks=[log_file_change])\n                    ]\n                },\n            ),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query, HookCallback } from \"@anthropic-ai/claude-agent-sdk\";\n    import { appendFile } from \"fs/promises\";\n\n    const logFileChange: HookCallback = async (input) => {\n      const filePath = (input as any).tool_input?.file_path ?? \"unknown\";\n      await appendFile(\"./audit.log\", `${new Date().toISOString()}: modified ${filePath}\\n`);\n      return {};\n    };\n\n    for await (const message of query({\n      prompt: \"Refactor utils.py to improve readability\",\n      options: {\n        permissionMode: \"acceptEdits\",\n        hooks: {\n          PostToolUse: [{ matcher: \"Edit|Write\", hooks: [logFileChange] }]\n        }\n      }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n\n    [Learn more about hooks ](/docs/en/agent-sdk/hooks)\n  </Tab>\n  <Tab title=\"Subagents\">\n    Spawn specialized agents to handle focused subtasks. Your main agent delegates work, and subagents report back with results.\n\n    Define custom agents with specialized instructions. Include `Task` in `allowedTools` since subagents are invoked via the Task tool:\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from claude_agent_sdk import query, ClaudeAgentOptions, AgentDefinition\n\n\n    async def main():\n        async for message in query(\n            prompt=\"Use the code-reviewer agent to review this codebase\",\n            options=ClaudeAgentOptions(\n                allowed_tools=[\"Read\", \"Glob\", \"Grep\", \"Task\"],\n                agents={\n                    \"code-reviewer\": AgentDefinition(\n                        description=\"Expert code reviewer for quality and security reviews.\",\n                        prompt=\"Analyze code quality and suggest improvements.\",\n                        tools=[\"Read\", \"Glob\", \"Grep\"],\n                    )\n                },\n            ),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n    for await (const message of query({\n      prompt: \"Use the code-reviewer agent to review this codebase\",\n      options: {\n        allowedTools: [\"Read\", \"Glob\", \"Grep\", \"Task\"],\n        agents: {\n          \"code-reviewer\": {\n            description: \"Expert code reviewer for quality and security reviews.\",\n            prompt: \"Analyze code quality and suggest improvements.\",\n            tools: [\"Read\", \"Glob\", \"Grep\"]\n          }\n        }\n      }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n\n    Messages from within a subagent's context include a `parent_tool_use_id` field, letting you track which messages belong to which subagent execution.\n\n    [Learn more about subagents ](/docs/en/agent-sdk/subagents)\n  </Tab>\n  <Tab title=\"MCP\">\n    Connect to external systems via the Model Context Protocol: databases, browsers, APIs, and [hundreds more](https://github.com/modelcontextprotocol/servers).\n\n    This example connects the [Playwright MCP server](https://github.com/microsoft/playwright-mcp) to give your agent browser automation capabilities:\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from claude_agent_sdk import query, ClaudeAgentOptions\n\n\n    async def main():\n        async for message in query(\n            prompt=\"Open example.com and describe what you see\",\n            options=ClaudeAgentOptions(\n                mcp_servers={\n                    \"playwright\": {\"command\": \"npx\", \"args\": [\"@playwright/mcp@latest\"]}\n                }\n            ),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n    for await (const message of query({\n      prompt: \"Open example.com and describe what you see\",\n      options: {\n        mcpServers: {\n          playwright: { command: \"npx\", args: [\"@playwright/mcp@latest\"] }\n        }\n      }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n\n    [Learn more about MCP ](/docs/en/agent-sdk/mcp)\n  </Tab>\n  <Tab title=\"Permissions\">\n    Control exactly which tools your agent can use. Allow safe operations, block dangerous ones, or require approval for sensitive actions.\n\n    <Note>\n    For interactive approval prompts and the `AskUserQuestion` tool, see [Handle approvals and user input](/docs/en/agent-sdk/user-input).\n    </Note>\n\n    This example creates a read-only agent that can analyze but not modify code:\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from claude_agent_sdk import query, ClaudeAgentOptions\n\n\n    async def main():\n        async for message in query(\n            prompt=\"Review this code for best practices\",\n            options=ClaudeAgentOptions(\n                allowed_tools=[\"Read\", \"Glob\", \"Grep\"], permission_mode=\"bypassPermissions\"\n            ),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n    for await (const message of query({\n      prompt: \"Review this code for best practices\",\n      options: {\n        allowedTools: [\"Read\", \"Glob\", \"Grep\"],\n        permissionMode: \"bypassPermissions\"\n      }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n\n    [Learn more about permissions ](/docs/en/agent-sdk/permissions)\n  </Tab>\n  <Tab title=\"Sessions\">\n    Maintain context across multiple exchanges. Claude remembers files read, analysis done, and conversation history. Resume sessions later, or fork them to explore different approaches.\n\n    This example captures the session ID from the first query, then resumes to continue with full context:\n\n    <CodeGroup>\n    ```python Python\n    import asyncio\n    from claude_agent_sdk import query, ClaudeAgentOptions\n\n\n    async def main():\n        session_id = None\n\n        # First query: capture the session ID\n        async for message in query(\n            prompt=\"Read the authentication module\",\n            options=ClaudeAgentOptions(allowed_tools=[\"Read\", \"Glob\"]),\n        ):\n            if hasattr(message, \"subtype\") and message.subtype == \"init\":\n                session_id = message.session_id\n\n        # Resume with full context from the first query\n        async for message in query(\n            prompt=\"Now find all places that call it\",  # \"it\" = auth module\n            options=ClaudeAgentOptions(resume=session_id),\n        ):\n            if hasattr(message, \"result\"):\n                print(message.result)\n\n\n    asyncio.run(main())\n    ```\n\n    ```typescript TypeScript\n    import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n    let sessionId: string | undefined;\n\n    // First query: capture the session ID\n    for await (const message of query({\n      prompt: \"Read the authentication module\",\n      options: { allowedTools: [\"Read\", \"Glob\"] }\n    })) {\n      if (message.type === \"system\" && message.subtype === \"init\") {\n        sessionId = message.session_id;\n      }\n    }\n\n    // Resume with full context from the first query\n    for await (const message of query({\n      prompt: \"Now find all places that call it\", // \"it\" = auth module\n      options: { resume: sessionId }\n    })) {\n      if (\"result\" in message) console.log(message.result);\n    }\n    ```\n    </CodeGroup>\n\n    [Learn more about sessions ](/docs/en/agent-sdk/sessions)\n  </Tab>\n</Tabs>\n\n### Claude Code features\n\nThe SDK also supports Claude Code's filesystem-based configuration. To use these features, set `setting_sources=[\"project\"]` (Python) or `settingSources: ['project']` (TypeScript)  in your options.\n\n| Feature | Description | Location |\n|---------|-------------|----------|\n| [Skills](/docs/en/agent-sdk/skills) | Specialized capabilities defined in Markdown | `.claude/skills/SKILL.md` |\n| [Slash commands](/docs/en/agent-sdk/slash-commands) | Custom commands for common tasks | `.claude/commands/*.md` |\n| [Memory](/docs/en/agent-sdk/modifying-system-prompts) | Project context and instructions | `CLAUDE.md` or `.claude/CLAUDE.md` |\n| [Plugins](/docs/en/agent-sdk/plugins) | Extend with custom commands, agents, and MCP servers | Programmatic via `plugins` option |\n\n## Compare the Agent SDK to other Claude tools\n\nThe Claude platform offers multiple ways to build with Claude. Here's how the Agent SDK fits in:\n\n<Tabs>\n  <Tab title=\"Agent SDK vs Client SDK\">\n    The [Anthropic Client SDK](/docs/en/api/client-sdks) gives you direct API access: you send prompts and implement tool execution yourself. The **Agent SDK** gives you Claude with built-in tool execution.\n\n    With the Client SDK, you implement a tool loop. With the Agent SDK, Claude handles it:\n\n    <CodeGroup>\n    ```python Python\n    # Client SDK: You implement the tool loop\n    response = client.messages.create(...)\n    while response.stop_reason == \"tool_use\":\n        result = your_tool_executor(response.tool_use)\n        response = client.messages.create(tool_result=result, **params)\n\n    # Agent SDK: Claude handles tools autonomously\n    async for message in query(prompt=\"Fix the bug in auth.py\"):\n        print(message)\n    ```\n\n    ```typescript TypeScript\n    // Client SDK: You implement the tool loop\n    let response = await client.messages.create({ ...params });\n    while (response.stop_reason === \"tool_use\") {\n      const result = yourToolExecutor(response.tool_use);\n      response = await client.messages.create({ tool_result: result, ...params });\n    }\n\n    // Agent SDK: Claude handles tools autonomously\n    for await (const message of query({ prompt: \"Fix the bug in auth.py\" })) {\n      console.log(message);\n    }\n    ```\n    </CodeGroup>\n  </Tab>\n  <Tab title=\"Agent SDK vs Claude Code CLI\">\n    Same capabilities, different interface:\n\n    | Use case | Best choice |\n    |----------|-------------|\n    | Interactive development | CLI |\n    | CI/CD pipelines | SDK |\n    | Custom applications | SDK |\n    | One-off tasks | CLI |\n    | Production automation | SDK |\n\n    Many teams use both: CLI for daily development, SDK for production. Workflows translate directly between them.\n  </Tab>\n</Tabs>\n\n## Changelog\n\nView the full changelog for SDK updates, bug fixes, and new features:\n\n- **TypeScript SDK**: [view CHANGELOG.md](https://github.com/anthropics/claude-agent-sdk-typescript/blob/main/CHANGELOG.md)\n- **Python SDK**: [view CHANGELOG.md](https://github.com/anthropics/claude-agent-sdk-python/blob/main/CHANGELOG.md)\n\n## Reporting bugs\n\nIf you encounter bugs or issues with the Agent SDK:\n\n- **TypeScript SDK**: [report issues on GitHub](https://github.com/anthropics/claude-agent-sdk-typescript/issues)\n- **Python SDK**: [report issues on GitHub](https://github.com/anthropics/claude-agent-sdk-python/issues)\n\n## Branding guidelines\n\nFor partners integrating the Claude Agent SDK, use of Claude branding is optional. When referencing Claude in your product:\n\n**Allowed:**\n- \"Claude Agent\" (preferred for dropdown menus)\n- \"Claude\" (when within a menu already labeled \"Agents\")\n- \"{YourAgentName} Powered by Claude\" (if you have an existing agent name)\n\n**Not permitted:**\n- \"Claude Code\" or \"Claude Code Agent\"\n- Claude Code-branded ASCII art or visual elements that mimic Claude Code\n\nYour product should maintain its own branding and not appear to be Claude Code or any Anthropic product. For questions about branding compliance, contact our [sales team](https://www.anthropic.com/contact-sales).\n\n## License and terms\n\nUse of the Claude Agent SDK is governed by [Anthropic's Commercial Terms of Service](https://www.anthropic.com/legal/commercial-terms), including when you use it to power products and services that you make available to your own customers and end users, except to the extent a specific component or dependency is covered by a different license as indicated in that component's LICENSE file.\n\n## Next steps\n\n<CardGroup cols={2}>\n  <Card title=\"Quickstart\" icon=\"play\" href=\"/docs/en/agent-sdk/quickstart\">\n    Build an agent that finds and fixes bugs in minutes\n  </Card>\n  <Card title=\"Example agents\" icon=\"star\" href=\"https://github.com/anthropics/claude-agent-sdk-demos\">\n    Email assistant, research agent, and more\n  </Card>\n  <Card title=\"TypeScript SDK\" icon=\"code\" href=\"/docs/en/agent-sdk/typescript\">\n    Full TypeScript API reference and examples\n  </Card>\n  <Card title=\"Python SDK\" icon=\"code\" href=\"/docs/en/agent-sdk/python\">\n    Full Python API reference and examples\n  </Card>\n</CardGroup>"}]},"uuid":"1e172001-24c7-40c2-acc2-6a4c7446d771","timestamp":"2026-02-16T19:45:30.911Z","sourceToolAssistantUUID":"db7ad6f4-92f3-4c5e-b707-5bac35ed8f52"}
{"parentUuid":"1e172001-24c7-40c2-acc2-6a4c7446d771","isSidechain":true,"userType":"external","cwd":"/Users/obliviousharmony/Code/woocommerce/woocommerce","sessionId":"23e61697-22ff-48a7-85e6-0b1960da61e3","version":"2.1.20","gitBranch":"add/62921-shared-monorepo-ts-config","agentId":"a685696","message":{"model":"claude-haiku-4-5-20251001","id":"msg_015QV9Pw21JpL4TmuLXCna7h","type":"message","role":"assistant","content":[{"type":"text","text":"Excellent! Now I have comprehensive information to provide. Let me compile a detailed response based on the official documentation.\n\n## Background Agents and Autonomous Execution in Claude Code\n\nBased on the official documentation, here's comprehensive information about background agents, headless mode, and related features:\n\n---\n\n### 1. **What are Background Agents? (Headless Mode)**\n\nIn Claude Code terminology, \"background agents\" refer to **headless mode** - the ability to run Claude Code non-interactively from the command line or scripts. The documentation states:\n\n> \"The CLI was previously called 'headless mode.' The `-p` flag and all CLI options work the same way.\"\n\n**Basic usage:**\n```bash\nclaude -p \"Find and fix the bug in auth.py\" --allowedTools \"Read,Edit,Bash\"\n```\n\nThe `-p` (or `--print`) flag runs Claude non-interactively without an interactive session. All standard CLI options work with this flag.\n\n---\n\n### 2. **Headless Mode and Output Formats**\n\nHeadless mode supports multiple output formats for integration with scripts and automation:\n\n**Text format (default):**\n```bash\nclaude -p \"Summarize this project\"\n```\n\n**JSON format (structured output):**\n```bash\nclaude -p \"Summarize this project\" --output-format json\n```\n\nReturns session metadata, usage info, and results in a structured format with a `result` field.\n\n**Streaming JSON format (real-time output):**\n```bash\nclaude -p \"Analyze this log file\" --output-format stream-json --verbose --include-partial-messages\n```\n\nEach line is a JSON object representing an event. Useful for real-time processing.\n\n**Schema-based structured output:**\n```bash\nclaude -p \"Extract function names from auth.py\" \\\n  --output-format json \\\n  --json-schema '{\"type\":\"object\",\"properties\":{\"functions\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"functions\"]}'\n```\n\n---\n\n### 3. **Running Claude Code Autonomously**\n\nThere are three main approaches for autonomous/background execution:\n\n#### **A. Headless CLI (`claude -p`)**\nFor simple scripts and CI/CD pipelines:\n```bash\nclaude -p \"Run the test suite and fix any failures\" \\\n  --allowedTools \"Bash,Read,Edit\"\n```\n\n#### **B. Agent SDK (Python/TypeScript)**\nFor production agents with full programmatic control. The Agent SDK is available as:\n- **CLI**: `claude -p` (same headless interface)\n- **Python package**: `pip install claude-agent-sdk`\n- **TypeScript package**: `npm install @anthropic-ai/claude-agent-sdk`\n\nThe Agent SDK provides the same tools and context management as Claude Code but with programmatic control:\n\n```python\nimport asyncio\nfrom claude_agent_sdk import query, ClaudeAgentOptions\n\nasync def main():\n    async for message in query(\n        prompt=\"Find and fix the bug in auth.py\",\n        options=ClaudeAgentOptions(allowed_tools=[\"Read\", \"Edit\", \"Bash\"]),\n    ):\n        print(message)\n\nasyncio.run(main())\n```\n\n#### **C. Multiple Parallel Sessions**\nRun Claude Code instances in parallel for distributed work:\n- **Desktop app**: Manage visually with isolated worktrees\n- **Web version**: Cloud-based isolated VMs\n- **Agent teams**: Automated coordination with shared tasks and messaging\n\n---\n\n### 4. **Safe Autonomous Mode**\n\nFor unattended execution, Claude Code offers **Safe Autonomous Mode**:\n\n```bash\nclaude -p \"Fix all lint errors\" --dangerously-skip-permissions\n```\n\n**Important safety considerations:**\n- Only use `--dangerously-skip-permissions` in sandboxed environments without internet access\n- Bypassing permission checks can result in data loss or system corruption\n- Better alternative: Enable **sandboxing** (`/sandbox`) for OS-level isolation with defined boundaries instead of bypassing all checks\n\n**Safer approach with sandboxing:**\n- Use `/sandbox` to enable OS-level isolation\n- Define upfront boundaries rather than bypassing permissions\n- Allows autonomy while maintaining security\n\n---\n\n### 5. **CI/CD Integration (Autonomous Execution)**\n\nClaude Code integrates with CI/CD pipelines via:\n\n#### **GitHub Actions**\n- Built-in action for automated workflows\n- Can automatically fix issues, run reviews, and create PRs\n- Use with Agent SDK CLI or API\n\n#### **GitLab CI/CD**\n- Integrated support for GitLab pipelines\n- Auto-fix bugs, implement features, respond to issues\n- Same API/SDK-based approach\n\n**Example GitHub Actions workflow:**\n```bash\nclaude -p \"Review changed files and suggest improvements\" \\\n  --output-format json\n```\n\n---\n\n### 6. **What About \"OpenClaw\" or Similar?**\n\nThe documentation does not mention any feature called \"OpenClaw\" or similar terminology. The primary autonomous/background execution mechanisms in Claude Code are:\n- **Headless mode** (`claude -p`)\n- **Agent SDK** (Python/TypeScript)\n- **Agent Teams** (for coordinated multi-agent execution)\n- **Sandboxing** (for security-aware autonomous execution)\n\n---\n\n### 7. **Key Safety Mechanisms**\n\n**Built-in protections for autonomous execution:**\n\n| Mechanism | How it works |\n|-----------|-------------|\n| **Permission system** | Specify exactly which tools agents can use via `--allowedTools` |\n| **Permission modes** | `plan` (read-only), `acceptEdits` (auto-approve), `bypassPermissions` (dangerous) |\n| **Sandboxing** | OS-level filesystem and network isolation |\n| **Hooks** | Validate, log, or block agent actions before/after tool use |\n| **Tool allowlists** | Allow only safe operations (e.g., `git commit`, `npm run lint`) |\n| **MCP security** | Managed access control for external tool integrations |\n| **Prompt injection protection** | Core protections built into Claude Code |\n\n---\n\n### 8. **Best Practices for Background Execution**\n\nFrom the best practices documentation:\n\n1. **Scope permissions tightly:**\n   ```bash\n   --allowedTools \"Bash(git diff *),Bash(git commit *)\"\n   ```\n\n2. **Use output formats for integration:**\n   - `text`: Simple cases\n   - `json`: Parsing results programmatically\n   - `stream-json`: Real-time processing\n\n3. **Combine with verification:**\n   ```bash\n   claude -p \"Run tests and fix failures\" \\\n     --allowedTools \"Bash,Edit\" \\\n     --output-format json | jq '.result'\n   ```\n\n4. **For sensitive operations:**\n   - Use sandboxing instead of bypassing permissions\n   - Restrict to read-only operations in `plan` mode\n   - Use hooks for audit logging\n\n---\n\n### 9. **Recommended Reading**\n\n- **Headless mode docs**: https://code.claude.com/docs/en/headless.md\n- **Agent SDK overview**: https://platform.claude.com/docs/en/agent-sdk/overview\n- **Best practices for automation**: https://code.claude.com/docs/en/best-practices#automate-and-scale\n- **GitHub Actions integration**: https://code.claude.com/docs/en/github-actions.md\n- **GitLab CI/CD integration**: https://code.claude.com/docs/en/gitlab-ci-cd.md\n- **Security guidelines**: https://code.claude.com/docs/en/security.md\n- **Sandboxing documentation**: https://code.claude.com/docs/en/sandboxing.md\n\n---\n\n### Summary\n\nClaude Code supports autonomous/background execution through:\n1. **Headless mode** (`claude -p`) for simple CLI integration\n2. **Agent SDK** (Python/TypeScript) for production agents\n3. **Safe Autonomous Mode** with permission controls and sandboxing\n4. **CI/CD integration** via GitHub Actions and GitLab pipelines\n\nThere is no feature called \"OpenClaw\" - the ecosystem uses standard terminology: headless mode, Agent SDK, and agent teams. All autonomous execution includes built-in safety mechanisms via permissions, sandboxing, and hooks to prevent unintended behavior."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":20428,"cache_read_input_tokens":25032,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":20428},"output_tokens":4,"service_tier":"standard","inference_geo":"not_available"}},"requestId":"req_011CYCKfe6D5brX1VgYkpu2k","type":"assistant","uuid":"facaa5b4-3075-4950-b454-93180c65daf7","timestamp":"2026-02-16T19:45:50.091Z"}
